<!DOCTYPE html>





<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.9.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.4.0">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.4.0">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.4.0">
  <link rel="mask-icon" href="/images/logo.svg?v=7.4.0" color="#222">

<link rel="stylesheet" href="/css/main.css?v=7.4.0">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '7.4.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":true,"show_result":false,"style":"mac"},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: 'Copy',
      copy_success: 'Copied',
      copy_failure: 'Copy failed'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="1. apt 静默更新 1apt-get update -qq">
<meta name="keywords" content="linux,ubuntu,debian,centos">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux SKill(Linux技巧)">
<meta property="og:url" content="https://blog.vicker.cn/2019/09/15/Linux-SKill-Linux技巧/index.html">
<meta property="og:site_name" content="KitBar">
<meta property="og:description" content="1. apt 静默更新 1apt-get update -qq">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2019-09-15T15:26:16.945Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Linux SKill(Linux技巧)">
<meta name="twitter:description" content="1. apt 静默更新 1apt-get update -qq">
  <link rel="canonical" href="https://blog.vicker.cn/2019/09/15/Linux-SKill-Linux技巧/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>Linux SKill(Linux技巧) | KitBar</title>
  








  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">
  <div class="container use-motion">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">KitBar</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">四月は君の嘘</p>
      
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
      
        
        <li class="menu-item menu-item-home">
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-about">
      
    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>About</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-tags">
      
    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>Tags</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-categories">
      
    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>Categories</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-archives">
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>

  </li>
  </ul>

    

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/virualv" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
      <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block post">
    <link itemprop="mainEntityOfPage" href="https://blog.vicker.cn/2019/09/15/Linux-SKill-Linux技巧/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="virualv">
      <meta itemprop="description" content="A new kitbar blog site!">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KitBar">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">Linux SKill(Linux技巧)

          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2019-09-15 23:04:16 / Modified: 23:26:16" itemprop="dateCreated datePublished" datetime="2019-09-15T23:04:16+08:00">2019-09-15</time>
            </span>
          
            

            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="1-apt"><a href="#1-apt" class="headerlink" title="1. apt"></a>1. apt</h2><ul>
<li>静默更新</li>
</ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get update -qq</span><br></pre></td></tr></table></figure><a id="more"></a>


<ul>
<li>静默下载安装</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install -q -y vim</span><br></pre></td></tr></table></figure>

<ul>
<li>处理安装时的错误</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get intall -f</span><br></pre></td></tr></table></figure>

<h2 id="2-aptitude"><a href="#2-aptitude" class="headerlink" title="2. aptitude"></a>2. aptitude</h2><p>当遇到大量依赖包无法处理时。使用aptitude处理</p>
<p>其具有强大是依赖处理问题</p>
<p><strong>使用方式</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">aptitude</span><br><span class="line">	update  更新源</span><br><span class="line">	install 安装软件包</span><br><span class="line">	remove  卸载软件包</span><br><span class="line">	purge   卸载软件包并删除配置文件</span><br><span class="line">	search  搜索软件包</span><br><span class="line">	show    显示软件包的详细信息</span><br></pre></td></tr></table></figure>

<h2 id="3-利用cat添加文本文件"><a href="#3-利用cat添加文本文件" class="headerlink" title="3. 利用cat添加文本文件"></a>3. 利用cat添加文本文件</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root@localhost:~# cat &gt; /etc/profile.d/env.sh</span><br><span class="line">export EDITOR=vim     [Enter ， Ctrl+C]</span><br><span class="line">^C</span><br><span class="line">root@localhost:~# cat /etc/profile.d/env.sh</span><br><span class="line">export EDITOR=vim</span><br></pre></td></tr></table></figure>

<h2 id="4-apt卸载文件时，出现的问题"><a href="#4-apt卸载文件时，出现的问题" class="headerlink" title="4. apt卸载文件时，出现的问题"></a>4. apt卸载文件时，出现的问题</h2><blockquote>
<p>在卸载之前安装的mysql 或者 mariadb后，再次安装mysql或者mariadb时，如果现在安装的版本地低于之前的安装，要删除/etc/mysql和/usr/lib/mysql 中的文件，否则会出现错误导致安装不上</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash"> 建议在每次利用包管理卸载时，使用 purge 参数，可以彻底移出 安装包相关文件</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> </span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> apt remove --purge [PackageName]</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> apt-get purge [PackageName]</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> apt-get autoremove --purge</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"></span></span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="5-Ubuntu-输入正确密码却无法进入桌面"><a href="#5-Ubuntu-输入正确密码却无法进入桌面" class="headerlink" title="5. Ubuntu 输入正确密码却无法进入桌面"></a>5. Ubuntu 输入正确密码却无法进入桌面</h2><blockquote>
<p>查询网上，得出解决方案</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash"> 原因：用户主目录中的.Xauthority的所有者变成了root，导致用户没有.Xauthority权限startx无法读入display信息</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> -rw-------  1 root   root         466 8月  19 09:54 .Xauthority</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> </span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> <span class="comment"># sudo chown ts:ts /home/ts/.Xauthority</span></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> </span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> -rw-------  1 ts   ts         466 8月  19 09:54 .Xauthority</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"></span></span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p>更改所有者解决</p>
</blockquote>
<h2 id="6-获取Ubuntu本地IP地址"><a href="#6-获取Ubuntu本地IP地址" class="headerlink" title="6. 获取Ubuntu本地IP地址"></a>6. 获取Ubuntu本地IP地址</h2><ul>
<li><p>通用</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tmpip=$(ip a | grep inet | sed -e 's/^.*inet//g' | sed -e '1,2 d' | sed -e '$d');echo $&#123;tmpip%%/*&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Ubuntu 16.04</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig eno1 | grep inet | sed -e s/^.*addr:// | sed -e s/B.*$// | sed -e '$d'</span><br></pre></td></tr></table></figure>
</li>
<li><p>Ubuntu 18.04</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig eno1 | grep inet | sed -e s/^.*inet// | sed -e s/netmask.*$// | sed -e '$d'</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="7-修改-etc-sudoers-文件格式错误，导致无法使用sudo"><a href="#7-修改-etc-sudoers-文件格式错误，导致无法使用sudo" class="headerlink" title="7. 修改/etc/sudoers 文件格式错误，导致无法使用sudo"></a>7. 修改/etc/sudoers 文件格式错误，导致无法使用sudo</h2><ul>
<li><p>解决方式一</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">su -</span><br><span class="line">登录到root账户修改/etc/sudoers到原来状态</span><br><span class="line">[前提：设置过root密码]</span><br></pre></td></tr></table></figure>
</li>
<li><p>解决方式二</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">重启机器在开机准备进入系统时按Shift键进入到grub恢复模式，然后在root环境下修改/etc/sudoers文件到原来状态，然后重启机器</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="8-LVM修改卷组名后忘记修改fstab，导致重启失败"><a href="#8-LVM修改卷组名后忘记修改fstab，导致重启失败" class="headerlink" title="8. LVM修改卷组名后忘记修改fstab，导致重启失败"></a>8. LVM修改卷组名后忘记修改fstab，导致重启失败</h2><blockquote>
<p>由于修改卷组名后，/etc/fstab未做对应得修改使系统重启时无法挂载逻辑卷<br>系统不停的扫描导致重启失败</p>
</blockquote>
<ul>
<li>解决方式</li>
</ul>
<ol>
<li>重启机器在开机准备进入系统时按Shift键进入到高级启动模式，按e键，修改grub启动文件将对应得卷组名改正</li>
<li>再进入恢复模式进root账户修改/etc/fstab文件和其他启动相关的文件</li>
</ol>
<h2 id="9-Linux-apt安装弹窗设置干扰自动化安装"><a href="#9-Linux-apt安装弹窗设置干扰自动化安装" class="headerlink" title="9. Linux apt安装弹窗设置干扰自动化安装"></a>9. Linux apt安装弹窗设置干扰自动化安装</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo debconf-set-selections &lt;&lt;&lt; '弹窗相关的设置信息'</span><br></pre></td></tr></table></figure>

<p>Example：</p>
<ul>
<li>LDAP</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">debconf-set-selections &lt;&lt;&lt; 'slapd slapd/internal/adminpw password mypass'</span><br><span class="line">debconf-set-selections &lt;&lt;&lt; 'slapd slapd/internal/generated_adminpw password mypass'</span><br><span class="line">debconf-set-selections &lt;&lt;&lt; 'slapd slapd/password1 password mypass'</span><br><span class="line">debconf-set-selections &lt;&lt;&lt; 'slapd slapd/password2 password mypass'</span><br></pre></td></tr></table></figure>

<ul>
<li>MySQL</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">debconf-set-selections &lt;&lt;&lt; 'mysql-server-5.7 mysql-server/root_password password mypass'</span><br><span class="line">debconf-set-selections &lt;&lt;&lt; 'mysql-server-5.7 mysql-server/root_password_again password mypass'</span><br></pre></td></tr></table></figure>

<h2 id="10-vim快捷注释方法"><a href="#10-vim快捷注释方法" class="headerlink" title="10. vim快捷注释方法"></a>10. vim快捷注释方法</h2><p>批量插入字符快捷键：</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Ctrl+v进入VISUAL BLOCK（可视块）模式，按 j （向下选取列）或者 k （向上选取列），再按Shift + i 进入编辑模式然后输入你想要插入的字符（任意字符），再按两次Esc就可以实现批量插入字符，不仅仅实现批量注释而已。</span><br></pre></td></tr></table></figure>

<p>批量删除字符快捷键：</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Ctrl+v进入VISUAL BLOCK（可视块）模式，按 j （向下选取列）或者 k （向上选取列），直接（不用进入编辑模式）按 x 或者 d 就可以直接删去，再按Esc退出</span><br></pre></td></tr></table></figure>

<h2 id="11-mariadb普通用户无法登录的问题"><a href="#11-mariadb普通用户无法登录的问题" class="headerlink" title="11. mariadb普通用户无法登录的问题"></a>11. mariadb普通用户无法登录的问题</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">是由于mariadb在10版本后mysql库的user表中plugin字段默认为unix<span class="emphasis">_socket所导致的将其改为mysql_</span>native_password则解决</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> mysql; </span><br><span class="line"><span class="keyword">update</span> <span class="keyword">user</span> <span class="keyword">set</span> <span class="keyword">plugin</span>=<span class="string">'mysql_native_password'</span> <span class="keyword">where</span> <span class="keyword">User</span>=<span class="string">'root'</span>;</span><br></pre></td></tr></table></figure>

<h2 id="12-Docker修改镜像默认存储位置"><a href="#12-Docker修改镜像默认存储位置" class="headerlink" title="12. Docker修改镜像默认存储位置"></a>12. Docker修改镜像默认存储位置</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/docker/daemon.json</span><br></pre></td></tr></table></figure>

<p>在其中加入下列内容，注意：内容格式是json格式</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">"graph": "/home/$Path"   # $Path表示路径</span><br></pre></td></tr></table></figure>

<h2 id="13-ln-find-du-sed命令使用简介"><a href="#13-ln-find-du-sed命令使用简介" class="headerlink" title="13. ln,find,du,sed命令使用简介"></a>13. ln,find,du,sed命令使用简介</h2><p>每次想创建软链都会忘了ln -s的前后参数规则，每次都要百度或Google搜一下，实在是烦死了，所以这次干脆记在博客上吧，算是个备忘了</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s a文件路径 b文件路径</span><br></pre></td></tr></table></figure>

<blockquote>
<p>其中a文件代表你要链接的文件或文件夹路径，也即被链接文件或文件夹路径<br>其中b文件代表将要创建链接的文件，其指向a文件（文件夹）。好比C语言中的指针</p>
</blockquote>
<h3 id="find命令"><a href="#find命令" class="headerlink" title="find命令"></a>find命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">使用方法： </span><br><span class="line">find   path   -option   [-print ]   [ -exec  -ok  command ]  &#123;&#125; \;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#####  根据文件名查找 #######</span></span></span><br><span class="line">find / -name filename 再根目录里面搜索文件名为filename的文件</span><br><span class="line">find /home -name "*.txt"</span><br><span class="line">find /home -iname "*.txt"  # 忽略大小写</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#####  根据文件类型查找 #######</span></span></span><br><span class="line">find . -type 类型参数</span><br><span class="line">f 普通文件</span><br><span class="line">l 符号连接 </span><br><span class="line">d 目录 </span><br><span class="line">c 字符设备 </span><br><span class="line">b 块设备 </span><br><span class="line">s 套接字 </span><br><span class="line">p Fifo</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#####  根据目录深度查找 #######</span></span></span><br><span class="line">find . -maxdepth 3 -type f  # 最大深度为3</span><br><span class="line">find . -mindepth 2 -type f  # 最小深度为2</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">########   根据文件的权限或者大小名字类型进行查找 ###########</span></span></span><br><span class="line"></span><br><span class="line">find . -type f -size (+|-)文件大小 # +表示大于 -表示小于 </span><br><span class="line">b —— 块（512字节） </span><br><span class="line">c —— 字节 </span><br><span class="line">w —— 字（2字节） </span><br><span class="line">k —— 千字节 </span><br><span class="line">M —— 兆字节 </span><br><span class="line">G —— 吉字节</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">########   按照时间查找  ############</span></span></span><br><span class="line"></span><br><span class="line">-atime（+|-）n  # 此选项代表查找出n天以前被读取过的文件。</span><br><span class="line">-mtime（+|-）n  # 此选项代表查找出n天以前文件内容发生改变的文件。</span><br><span class="line">-ctime（+|-）n  # 此选项代表查找出n天以前的文件的属性发生改变的文件。</span><br><span class="line">-newer file  # 此选项代表查找出所有比file新的文件。</span><br><span class="line">-newer file1 ! –newer file2  # 此选项代表查找比file1文件时间新但是没有file2时间新的文件。</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 注意：   </span></span><br><span class="line"><span class="meta">#</span><span class="bash">  n为数字，如果前面没有+或者-号，代表的是查找出n天以前的，但是只是一天之内的范围内发生变化的文件。</span></span><br><span class="line"><span class="meta">#</span><span class="bash">  如果n前面有+号，则代表查找距离n天之前的发生变化的文件。如果是减号，则代表查找距离n天之内的所有发生变化的文件。</span></span><br><span class="line"><span class="meta">#</span><span class="bash">  -newer file1 ! –newer file2中的!是逻辑非运算符</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">########   按照用户/权限查找  ############</span></span></span><br><span class="line"></span><br><span class="line">-user 用户名：根据文件的属主名查找文件。</span><br><span class="line">-group 组名：根据文件的属组名查找文件。</span><br><span class="line">-uid n：根据文件属主的UID进行查找文件。</span><br><span class="line">-gid n：根据文件属组的GID进行查找文件。</span><br><span class="line">-nouser：查询文件属主在/etc/passwd文件中不存在的文件。</span><br><span class="line">-nogroup：查询文件属组在/etc/group文件中不存在的文件</span><br><span class="line">-perm 777： 查询权限为777的文件</span><br><span class="line"></span><br><span class="line">来自: http://man.linuxde.net/find</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#######  查找时指定多个条件   ############</span></span></span><br><span class="line"></span><br><span class="line">-o：逻辑或，两个条件只要满足一个即可。</span><br><span class="line">-a：逻辑与，两个条件必须同时满足。</span><br><span class="line"></span><br><span class="line">find  /etc -size +2M -a -size -10M</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">########  对查找结果进行处理  #############</span></span></span><br><span class="line">-exec  shell命令  &#123;&#125;  \;</span><br><span class="line">-ok  shell命令  &#123;&#125;  \;</span><br><span class="line">其中-exec就是代表要执行shell命令，后面加的是shell指令，再后面的“&#123;&#125;”表示的是要对前面查询到的结果进行查询，最后的“\；”表示命令结束。需要注意的是“&#123;&#125;”和“\”之间是要有空格的。而-ok选项与-exec的唯一区别就是它在执行shell命令的时候会事先进行询问，-print选项是将结果显示在标准输入上</span><br><span class="line"></span><br><span class="line">find /home -name  “*.txt” -ok ls -l &#123;&#125; \;</span><br><span class="line">find /home -name  “*.txt” -ok rm &#123;&#125; \;</span><br></pre></td></tr></table></figure>

<h3 id="du"><a href="#du" class="headerlink" title="du"></a>du</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">du dirname # 显示dirname下所有目录及其子目录的大小</span><br><span class="line">-s ： 如果后面是目录，只显示一层</span><br><span class="line">-h : 以能显示的最大单位显示</span><br></pre></td></tr></table></figure>

<p><strong>初识正则表达式</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">^ : 匹配开头</span><br><span class="line"><span class="meta">$</span><span class="bash"> : 匹配结尾</span></span><br><span class="line">[] ： 范围匹配</span><br><span class="line">[a-z] : 匹配有小写字母</span><br><span class="line">[A-Z] : 匹配所有大写字母</span><br><span class="line">[0-9] : 匹配所有数字</span><br><span class="line">. ： 匹配单个字符</span><br><span class="line">* ： 表示*前面的内容出现0次或多次</span><br><span class="line">+ ： 表示+前面的内容出现1次或多次</span><br><span class="line">? ： 表示？前面的内容出现0次或1次</span><br><span class="line"></span><br><span class="line">cat a.txt |grep hat$ # 匹配以hat结尾的行</span><br><span class="line">cat a.txt |grep ^hat # 匹配以hat开头的行</span><br><span class="line">cat a.txt | grep -E "[0-9]*"  # 匹配有0到多个数字的行</span><br><span class="line">cat a.txt | grep -E "[0-9]+"  # 匹配有至少有1个数字的行</span><br><span class="line">cat a.txt | grep -E "[0-9]？"  # 匹配有0到1个数字的行</span><br></pre></td></tr></table></figure>

<h3 id="sed-流编辑器，一次处理一行内容"><a href="#sed-流编辑器，一次处理一行内容" class="headerlink" title="sed : 流编辑器，一次处理一行内容"></a>sed : 流编辑器，一次处理一行内容</h3><h4 id="复制代码"><a href="#复制代码" class="headerlink" title="复制代码"></a>复制代码</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed [-nefr] [动作] [文件]</span><br></pre></td></tr></table></figure>

<h4 id="选项与参数："><a href="#选项与参数：" class="headerlink" title="选项与参数："></a>选项与参数：</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-n ：使用安静(silent)模式。在一般 sed 的用法中，所有来自 STDIN 的数据一般都会被列出到终端上。但如果加上 -n 参数后，则只有经过sed 特殊处理的那一行(或者动作)才会被列出来</span><br><span class="line">-e ：直接在命令列模式上进行 sed 的动作编辑</span><br><span class="line">-f ：直接将 sed 的动作写在一个文件内， -f filename 则可以运行 filename 内的 sed 动作</span><br><span class="line">-r ：sed 的动作支持的是延伸型正规表示法的语法。(默认是基础正规表示法语法)</span><br><span class="line">-i ：直接修改读取的文件内容，而不是输出到终端。</span><br></pre></td></tr></table></figure>

<p><em>动作说明： [n1[,n2]]</em></p>
<pre><code>动作：n1, n2 ：不一定存在，一般代表选择进行动作的行数，比如，如果我的动作是需要在 10 到 20 行之间进行的，则10,20[动作行为]</code></pre><h4 id="动作："><a href="#动作：" class="headerlink" title="动作："></a>动作：</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">a ：新增， a 的后面可以接字串，而这些字串会在新的一行出现(目前的下一行)</span></span><br><span class="line"><span class="meta">#</span><span class="bash">c ：取代， c 的后面可以接字串，这些字串可以取代 n1,n2 之间的行！</span></span><br><span class="line"><span class="meta">#</span><span class="bash">d ：删除，因为是删除啊，所以 d 后面通常不接任何咚咚；</span></span><br><span class="line">	sed  "3d"  file  #  删除第三行</span><br><span class="line">	sed  "1,3d"  # 删除前三行</span><br><span class="line">	sed  "1d;3d;5d"  # 删除1、3、5行</span><br><span class="line">	sed  "/^$/d" #删除空行   </span><br><span class="line">	sed  "/abc/d" #删除所有含有abc的行</span><br><span class="line">	sed  "/abc/，/def/d" #删除abc 和 def 之间的行，包括其自身</span><br><span class="line">	sed  "1，/def/d" #删除第一行到 def 之间的行，包括其自身</span><br><span class="line">	sed  "/abc/，+3d " # 删除含有abc的行之后，在删除3行</span><br><span class="line">	sed  "/abc/，～3d" #从含有abc的行开始，共删除3行</span><br><span class="line">	sed  "1~2d"  # 从第1行开始，每2行删除一行， 删除奇数行</span><br><span class="line">	sed  "2~2d"  # 从第2行开始，每2行删除一行， 删除奇数行</span><br><span class="line">	sed  "\$d"  # 删除最后一行</span><br><span class="line">	sed  "/dd\|cc/d"  删除有dd或者cc的行</span><br><span class="line">	</span><br><span class="line"><span class="meta">#</span><span class="bash">i ：插入， i 的后面可以接字串，而这些字串会在新的一行出现(目前的上一行)；</span></span><br><span class="line"><span class="meta">#</span><span class="bash">p ：列印，亦即将某个选择的数据印出。通常 p 会与参数 sed -n 一起运行</span></span><br><span class="line">	</span><br><span class="line">	sed -n  "3p"  file  #  显示第三行</span><br><span class="line">	sed -n  "1,3p"  # 显示前三行</span><br><span class="line">	sed -n  "2,+3p"  # 显示第二行，及后面的三行</span><br><span class="line">	sed -n  "\$p"  # 显示最后一行</span><br><span class="line">	sed -n "1p;3p;5p"  # 只显示文件1、3、5行</span><br><span class="line">	sed -n  "$="  # 显示文件行数</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">s ：替换，可以直接进行取代的工作。通常这个 s 的动作可以搭配正规表示法，例如 1,20s/old/new/g</span></span><br><span class="line">	</span><br><span class="line">	's/old/new/g'  </span><br><span class="line">	</span><br><span class="line">	sed  "s/\(all\)/bb/"</span><br><span class="line">	sed -r "s/(all)/bb/"</span><br></pre></td></tr></table></figure>
    </div>

    
    
    
        
      

      <footer class="post-footer">
          
            
          
          <div class="post-tags">
            
              <a href="/tags/linux-ubuntu-debian-centos/" rel="tag"># linux,ubuntu,debian,centos</a>
            
          </div>
        

        

          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
              
                <a href="/2019/09/15/python相关知识点/" rel="next" title="python相关知识点">
                  <i class="fa fa-chevron-left"></i> python相关知识点
                </a>
              
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
              
                <a href="/2019/09/15/Redis速成笔记/" rel="prev" title="Redis速成笔记">
                  Redis速成笔记 <i class="fa fa-chevron-right"></i>
                </a>
              
            </div>
          </div>
        
      </footer>
    
  </div>
  
  
  
  </article>

  </div>


          </div>
          

        </div>
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">
        
        
        
        
      

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-apt"><span class="nav-number">1.</span> <span class="nav-text">1. apt</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-aptitude"><span class="nav-number">2.</span> <span class="nav-text">2. aptitude</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-利用cat添加文本文件"><span class="nav-number">3.</span> <span class="nav-text">3. 利用cat添加文本文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-apt卸载文件时，出现的问题"><span class="nav-number">4.</span> <span class="nav-text">4. apt卸载文件时，出现的问题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-Ubuntu-输入正确密码却无法进入桌面"><span class="nav-number">5.</span> <span class="nav-text">5. Ubuntu 输入正确密码却无法进入桌面</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-获取Ubuntu本地IP地址"><span class="nav-number">6.</span> <span class="nav-text">6. 获取Ubuntu本地IP地址</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-修改-etc-sudoers-文件格式错误，导致无法使用sudo"><span class="nav-number">7.</span> <span class="nav-text">7. 修改/etc/sudoers 文件格式错误，导致无法使用sudo</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-LVM修改卷组名后忘记修改fstab，导致重启失败"><span class="nav-number">8.</span> <span class="nav-text">8. LVM修改卷组名后忘记修改fstab，导致重启失败</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-Linux-apt安装弹窗设置干扰自动化安装"><span class="nav-number">9.</span> <span class="nav-text">9. Linux apt安装弹窗设置干扰自动化安装</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-vim快捷注释方法"><span class="nav-number">10.</span> <span class="nav-text">10. vim快捷注释方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11-mariadb普通用户无法登录的问题"><span class="nav-number">11.</span> <span class="nav-text">11. mariadb普通用户无法登录的问题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#12-Docker修改镜像默认存储位置"><span class="nav-number">12.</span> <span class="nav-text">12. Docker修改镜像默认存储位置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-ln-find-du-sed命令使用简介"><span class="nav-number">13.</span> <span class="nav-text">13. ln,find,du,sed命令使用简介</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#find命令"><span class="nav-number">13.1.</span> <span class="nav-text">find命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#du"><span class="nav-number">13.2.</span> <span class="nav-text">du</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sed-流编辑器，一次处理一行内容"><span class="nav-number">13.3.</span> <span class="nav-text">sed : 流编辑器，一次处理一行内容</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#复制代码"><span class="nav-number">13.3.1.</span> <span class="nav-text">复制代码</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#选项与参数："><span class="nav-number">13.3.2.</span> <span class="nav-text">选项与参数：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#动作："><span class="nav-number">13.3.3.</span> <span class="nav-text">动作：</span></a></li></ol></li></ol></li></ol></div>
        
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">virualv</p>
  <div class="site-description" itemprop="description">A new kitbar blog site!</div>
</div>
  <nav class="site-state motion-element">
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">13</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-tags">
        
        <span class="site-state-item-count">13</span>
        <span class="site-state-item-name">tags</span>
        
      </div>
    
  </nav>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://github.com/virualv" title="GitHub &rarr; https://github.com/virualv" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="mailto:virualv@gmail.com" title="E-Mail &rarr; mailto:virualv@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://twitter.com/virualv" title="Twitter &rarr; https://twitter.com/virualv" rel="noopener" target="_blank"><i class="fa fa-fw fa-twitter"></i>Twitter</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://www.facebook.com/virualv" title="FB Page &rarr; https://www.facebook.com/virualv" rel="noopener" target="_blank"><i class="fa fa-fw fa-facebook"></i>FB Page</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://instagram.com/virualv" title="Instagram &rarr; https://instagram.com/virualv" rel="noopener" target="_blank"><i class="fa fa-fw fa-instagram"></i>Instagram</a>
      </span>
    
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">virualv</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.9.0</div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.4.0</div>

        












        
      </div>
    </footer>
  </div>

  


  <script src="/lib/anime.min.js?v=3.1.0"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
<script src="/js/utils.js?v=7.4.0"></script><script src="/js/motion.js?v=7.4.0"></script>
<script src="/js/schemes/muse.js?v=7.4.0"></script>
<script src="/js/next-boot.js?v=7.4.0"></script>



  





















  

  

  

</body>
</html>
