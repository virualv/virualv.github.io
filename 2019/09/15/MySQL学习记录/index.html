<!DOCTYPE html>





<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.9.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.4.0">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.4.0">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.4.0">
  <link rel="mask-icon" href="/images/logo.svg?v=7.4.0" color="#222">

<link rel="stylesheet" href="/css/main.css?v=7.4.0">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '7.4.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":true,"show_result":false,"style":"mac"},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: 'Copy',
      copy_success: 'Copied',
      copy_failure: 'Copy failed'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="MySQL一、数据库管理系统DBMS软件123456789binconfigdb	（保存数据）	- admin	  - 123adsk.txt&amp;#123;username,password,class...&amp;#125;	  - dndsjnd.txt&amp;#123;username,password,class...&amp;#125;	- course	- schoolsrc">
<meta name="keywords" content="sql,db,database,mysql,mariadb">
<meta property="og:type" content="article">
<meta property="og:title" content="SQL学习记录">
<meta property="og:url" content="https://blog.vicker.cn/2019/09/15/MySQL学习记录/index.html">
<meta property="og:site_name" content="KitBar">
<meta property="og:description" content="MySQL一、数据库管理系统DBMS软件123456789binconfigdb	（保存数据）	- admin	  - 123adsk.txt&amp;#123;username,password,class...&amp;#125;	  - dndsjnd.txt&amp;#123;username,password,class...&amp;#125;	- course	- schoolsrc">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://blog.vicker.cn/2019/09/15/MySQL学习记录/pic/sqljoin.png">
<meta property="og:updated_time" content="2019-09-16T14:08:03.349Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="SQL学习记录">
<meta name="twitter:description" content="MySQL一、数据库管理系统DBMS软件123456789binconfigdb	（保存数据）	- admin	  - 123adsk.txt&amp;#123;username,password,class...&amp;#125;	  - dndsjnd.txt&amp;#123;username,password,class...&amp;#125;	- course	- schoolsrc">
<meta name="twitter:image" content="https://blog.vicker.cn/2019/09/15/MySQL学习记录/pic/sqljoin.png">
  <link rel="canonical" href="https://blog.vicker.cn/2019/09/15/MySQL学习记录/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>SQL学习记录 | KitBar</title>
  








  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">
  <div class="container use-motion">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">KitBar</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">四月は君の嘘</p>
      
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
      
        
        <li class="menu-item menu-item-home">
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-about">
      
    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>About</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-tags">
      
    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>Tags</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-categories">
      
    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>Categories</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-archives">
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>

  </li>
  </ul>

    

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/virualv" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
      <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block post">
    <link itemprop="mainEntityOfPage" href="https://blog.vicker.cn/2019/09/15/MySQL学习记录/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="virualv">
      <meta itemprop="description" content="A new kitbar blog site!">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KitBar">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">SQL学习记录

          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2019-09-15 15:56:36" itemprop="dateCreated datePublished" datetime="2019-09-15T15:56:36+08:00">2019-09-15</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-09-16 22:08:03" itemprop="dateModified" datetime="2019-09-16T22:08:03+08:00">2019-09-16</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Database/" itemprop="url" rel="index"><span itemprop="name">Database</span></a></span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Database/MySQL/" itemprop="url" rel="index"><span itemprop="name">MySQL</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h1><h1 id="一、数据库管理系统DBMS"><a href="#一、数据库管理系统DBMS" class="headerlink" title="一、数据库管理系统DBMS"></a>一、数据库管理系统DBMS</h1><h3 id="软件"><a href="#软件" class="headerlink" title="软件"></a>软件</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">bin</span><br><span class="line">config</span><br><span class="line">db	（保存数据）</span><br><span class="line"><span class="bullet">	- </span>admin</span><br><span class="line"><span class="bullet">	  - </span>123adsk.txt&#123;username,password,class...&#125;</span><br><span class="line"><span class="bullet">	  - </span>dndsjnd.txt&#123;username,password,class...&#125;</span><br><span class="line"><span class="bullet">	- </span>course</span><br><span class="line"><span class="bullet">	- </span>school</span><br><span class="line">src</span><br></pre></td></tr></table></figure><a id="more"></a>

<h3 id="写程序："><a href="#写程序：" class="headerlink" title="写程序："></a>写程序：</h3><pre><code>a. 数据库在本地
    1.找到目录
    2.添加数据
b. 数据库在远程
    1.socket 连接上远程机器
    2.socket 发送（命令）# add|123asdk
c. 做些什么？？？</code></pre><h4 id="a-程序"><a href="#a-程序" class="headerlink" title="a. 程序"></a>a. 程序</h4><pre><code>程序，socket客户端</code></pre><h4 id="b-数据"><a href="#b-数据" class="headerlink" title="b. 数据"></a>b. 数据</h4><pre><code>socket服务端</code></pre><h4 id="c-制作一套规则"><a href="#c-制作一套规则" class="headerlink" title="c. 制作一套规则"></a>c. 制作一套规则</h4><pre><code>add|123asdk
delete|123asdk
...</code></pre><h4 id="d-socket客户端和服务端用户认证-授权，限制"><a href="#d-socket客户端和服务端用户认证-授权，限制" class="headerlink" title="d. socket客户端和服务端用户认证,授权，限制"></a>d. socket客户端和服务端用户认证,授权，限制</h4><p>– SQLserver（收费）</p>
<p><code>Oracle，sqlite，access。。。</code></p>
<p><code>MySQL，SqlServer，Oracle，sqlite，access。。。</code></p>
<h5 id="服务端和客户端"><a href="#服务端和客户端" class="headerlink" title="服务端和客户端"></a>服务端和客户端</h5><p>mysql：</p>
<pre><code>add|asdf</code></pre><p>SQLServer：</p>
<pre><code>a|asdf</code></pre><h1 id="二、下载安装："><a href="#二、下载安装：" class="headerlink" title="二、下载安装："></a>二、下载安装：</h1><p><code>1.下载</code></p>
<p><a href="https://cdn.mysql.com//Downloads/MySQL-5.7/mysql-5.7.26-winx64.zip" target="_blank" rel="noopener">MySQL 5.7.26 Portable ZIP</a></p>
<p><em>MySQL 5.7以后的Windows版本没有my.ini配置文件，可在解压后的根文件夹里自行新建。</em></p>
<p><em>配置文件如下仅供参考，可自行按需修改</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[client]</span><br><span class="line">port=3306</span><br><span class="line">default-character-set=utf8</span><br><span class="line"></span><br><span class="line">[mysqld]</span><br><span class="line">basedir=$mysql$</span><br><span class="line">datadir=$mysql$/data</span><br><span class="line">port=3306</span><br><span class="line">character-set-server=utf8</span><br><span class="line">default-storage-engine=INNODB</span><br><span class="line">max_connections=20</span><br><span class="line"></span><br><span class="line">[mysql]</span><br><span class="line">default-character-set=utf8</span><br></pre></td></tr></table></figure>

<p><code>2.解压到任意目录</code></p>
<p><code>3.服务器端运行起来</code></p>
<pre><code>mysqld</code></pre><p><code>4.客户端连接</code></p>
<h2 id="省事："><a href="#省事：" class="headerlink" title="省事："></a>省事：</h2><ul>
<li>将mysqld制作成Windows服务 （<code>mysqld.exe --install</code>）</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">net start mysql</span><br><span class="line">net stop mysql</span><br></pre></td></tr></table></figure>

<ul>
<li>打开服务管理，直接…</li>
</ul>
<h1 id="三、MySQL数据库"><a href="#三、MySQL数据库" class="headerlink" title="三、MySQL数据库"></a>三、MySQL数据库</h1><ol>
<li><p>概念</p>
<pre><code>数据库，文件夹
数据库表，文件
数据行，文件中的一行数据</code></pre></li>
<li><p>使用</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">启动服务器：</span><br><span class="line">	net start mysql</span><br><span class="line">	或</span><br><span class="line">	D:\Program Files\......\mysql\bin\mysqld</span><br><span class="line"></span><br><span class="line">service mysql start</span><br><span class="line"></span><br><span class="line">/etc/init.d/mysql start</span><br><span class="line"></span><br><span class="line">客户端：</span><br><span class="line">	mysql -u root -p</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>初试：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">databases</span>; 							<span class="comment"># 查看当前MySQL都有哪些数据，根目录都有哪些文件夹</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">database</span> 数据库名;					<span class="comment"># 创建文件夹</span></span><br><span class="line"><span class="keyword">use</span> 数据库名;								<span class="comment"># 使用选中数据库，进入目录</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">tables</span>;								<span class="comment"># 查看当前数据库下都有哪些数据表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> 表名(nid <span class="built_in">int</span>,<span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">20</span>),pwd <span class="built_in">varchar</span>(<span class="number">64</span>)); <span class="comment"># 创建数据表</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> 表名;							<span class="comment"># 查看表中的所有数据</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> 表名(nid,<span class="keyword">name</span>,pwd) <span class="keyword">value</span>(<span class="number">12</span>,<span class="string">'xiaoming'</span>,<span class="string">'123'</span>); <span class="comment"># 插入数据</span></span><br></pre></td></tr></table></figure>

<p><strong>注意：sql语句结尾一定要加;(英文格式的分号)</strong></p>
<ol start="3">
<li><p>用户授权</p>
<p> 用户管理特殊命令：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">创建用户</span><br><span class="line">	<span class="keyword">create</span> <span class="keyword">user</span> 用户名@IP地址 <span class="keyword">identified</span> <span class="keyword">by</span> <span class="string">'密码'</span>;</span><br><span class="line">创建用户并分配与root相同的权限</span><br><span class="line">    <span class="keyword">grant</span> <span class="keyword">all</span> <span class="keyword">on</span> *.* <span class="keyword">to</span> <span class="keyword">admin</span>@<span class="string">'%'</span> <span class="keyword">identified</span> <span class="keyword">by</span> <span class="string">'admin'</span> <span class="keyword">with</span> <span class="keyword">grant</span> <span class="keyword">option</span>;</span><br><span class="line">删除用户</span><br><span class="line">	<span class="keyword">drop</span> <span class="keyword">user</span> 用户名@IP地址;</span><br><span class="line">修改用户</span><br><span class="line">	<span class="keyword">rename</span> <span class="keyword">user</span> 用户名@IP地址; to 新用户名@IP地址;</span><br><span class="line">修改密码</span><br><span class="line">	<span class="keyword">set</span> <span class="keyword">password</span> <span class="keyword">for</span> 用户名@IP地址 = <span class="keyword">Password</span>(<span class="string">'新密码'</span>);</span><br><span class="line">	<span class="keyword">update</span> <span class="keyword">user</span> <span class="keyword">set</span> <span class="keyword">password</span> = <span class="keyword">password</span>(<span class="string">'新密码'</span>);               // 适用于mysql 5.5版</span><br><span class="line">	<span class="keyword">update</span> <span class="keyword">user</span> <span class="keyword">set</span> authentication_string = <span class="keyword">password</span>(<span class="string">'新密码'</span>);  // 适用于mysql 5.7及后续版本</span><br><span class="line">	<span class="keyword">flush</span> <span class="keyword">privileges</span>;                                            // 改完密码一定要刷新</span><br><span class="line">	</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">password</span>(<span class="string">'123456'</span>);		// 查看加密后的密文</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p><strong><em>PS：用户权限相关数据保存在mysql数据库的user表中，所以也可以直接对其进行操作（不建议）</em></strong></p>
<pre><code>权限管理特殊命令：</code></pre><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">grants</span> <span class="keyword">for</span> <span class="string">'用户'</span>@<span class="string">'IP地址'</span>;                    <span class="comment">-- 查看权限</span></span><br><span class="line"><span class="keyword">grant</span>  权限 <span class="keyword">on</span> 数据库.表 <span class="keyword">to</span>   <span class="string">'用户'</span>@<span class="string">'IP地址'</span>;      <span class="comment">-- 授权</span></span><br><span class="line"><span class="keyword">revoke</span> 权限 <span class="keyword">on</span> 数据库.表 <span class="keyword">from</span> <span class="string">'用户'</span>@<span class="string">'IP地址'</span>;      <span class="comment">-- 取消权限</span></span><br><span class="line"><span class="keyword">flush</span> <span class="keyword">privileges</span>;                                   <span class="comment">-- 刷新权限</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">all</span> <span class="keyword">privileges</span> <span class="keyword">on</span> *.* <span class="keyword">to</span> xiaoming <span class="keyword">identified</span> <span class="keyword">by</span> <span class="string">'123456'</span> <span class="keyword">with</span>  <span class="keyword">grant</span> <span class="keyword">option</span>; 指定密码是123456的xiaoming的权限（为了防止有多个用户名叫xiaoming的用户）</span><br></pre></td></tr></table></figure>

<p><strong>with  grant option 是将grant权限也赋给某人</strong></p>
<pre><code>对于权限：</code></pre><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">all privileges  除<span class="keyword">grant</span>外的所有权限 (<span class="keyword">privileges</span> 可以尝试省略)</span><br><span class="line">	<span class="keyword">select</span>          仅查权限</span><br><span class="line">	<span class="keyword">select</span>,<span class="keyword">insert</span>   查和插入权限</span><br><span class="line">	...</span><br><span class="line">	<span class="keyword">usage</span>                   无访问权限</span><br><span class="line">	<span class="keyword">alter</span>                   使用<span class="keyword">alter</span> <span class="keyword">table</span></span><br><span class="line">	<span class="keyword">alter</span> routine           使用<span class="keyword">alter</span> <span class="keyword">procedure</span>和<span class="keyword">drop</span> <span class="keyword">procedure</span></span><br><span class="line">	<span class="keyword">create</span>                  使用<span class="keyword">create</span> <span class="keyword">table</span></span><br><span class="line">	<span class="keyword">create</span> routine          使用<span class="keyword">create</span> <span class="keyword">procedure</span></span><br><span class="line">	<span class="keyword">create</span> <span class="keyword">temporary</span> <span class="keyword">tables</span> 使用<span class="keyword">create</span> <span class="keyword">temporary</span> <span class="keyword">tables</span></span><br><span class="line">	<span class="keyword">create</span> <span class="keyword">user</span>             使用<span class="keyword">create</span> <span class="keyword">user</span>、<span class="keyword">drop</span> <span class="keyword">user</span>、<span class="keyword">rename</span> <span class="keyword">user</span>和<span class="keyword">revoke</span>  <span class="keyword">all</span> <span class="keyword">privileges</span></span><br><span class="line">	<span class="keyword">create</span> <span class="keyword">view</span>             使用<span class="keyword">create</span> <span class="keyword">view</span></span><br><span class="line">	<span class="keyword">delete</span>                  使用<span class="keyword">delete</span></span><br><span class="line">	<span class="keyword">drop</span>                    使用<span class="keyword">drop</span> <span class="keyword">table</span></span><br><span class="line">	<span class="keyword">execute</span>                 使用<span class="keyword">call</span>和存储过程</span><br><span class="line">	<span class="keyword">file</span>                    使用<span class="keyword">select</span> <span class="keyword">into</span> <span class="keyword">outfile</span> 和 <span class="keyword">load</span> <span class="keyword">data</span> <span class="keyword">infile</span></span><br><span class="line">	<span class="keyword">grant</span> <span class="keyword">option</span>            使用<span class="keyword">grant</span> 和 <span class="keyword">revoke</span></span><br><span class="line">	<span class="keyword">index</span>                   使用<span class="keyword">index</span></span><br><span class="line">	<span class="keyword">insert</span>                  使用<span class="keyword">insert</span></span><br><span class="line">	<span class="keyword">lock</span> <span class="keyword">tables</span>             使用<span class="keyword">lock</span> <span class="keyword">table</span></span><br><span class="line">	process                 使用<span class="keyword">show</span> <span class="keyword">full</span> <span class="keyword">processlist</span></span><br><span class="line">	<span class="keyword">select</span>                  使用<span class="keyword">select</span></span><br><span class="line">	<span class="keyword">show</span> <span class="keyword">databases</span>          使用<span class="keyword">show</span> <span class="keyword">databases</span></span><br><span class="line">	<span class="keyword">show</span> <span class="keyword">view</span>               使用<span class="keyword">show</span> <span class="keyword">view</span></span><br><span class="line">	<span class="keyword">update</span>                  使用<span class="keyword">update</span></span><br><span class="line">	reload                  使用<span class="keyword">flush</span></span><br><span class="line">	<span class="keyword">shutdown</span>                使用mysqladmin <span class="keyword">shutdown</span>(关闭MySQL)</span><br><span class="line">	super                   使用<span class="keyword">change</span> <span class="keyword">master</span>、<span class="keyword">kill</span>、<span class="keyword">logs</span>、<span class="keyword">purge</span>、<span class="keyword">master</span>和<span class="keyword">set</span> <span class="keyword">global</span>。还允许mysqladmin调试登陆</span><br><span class="line">	<span class="keyword">replication</span> <span class="keyword">client</span>      服务器位置的访问</span><br><span class="line">	<span class="keyword">replication</span> <span class="keyword">slave</span>       由复制从属使用</span><br></pre></td></tr></table></figure>

<pre><code>对于目标数据库以及内部其他：</code></pre><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">数据库名.*           数据库中的所有</span><br><span class="line">数据库名.表          指定数据库中的某张表</span><br><span class="line">数据库名.存储过程    指定数据库中的存储过程</span><br><span class="line">*.*                  所有数据库</span><br></pre></td></tr></table></figure>

<pre><code>对于用户和IP：</code></pre><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">用户名@IP地址        用户只能在改IP下才能访问</span><br><span class="line">用户名@192.168.1.%   用户只能在改IP段下才能访问(通配符%表示任意)</span><br><span class="line">用户名@%             用户可以再任意IP下访问(默认IP地址为%)</span><br></pre></td></tr></table></figure>

<h1 id="四-SQL语句"><a href="#四-SQL语句" class="headerlink" title="四.SQL语句"></a>四.SQL语句</h1><p><strong>SQL语句的划分</strong></p>
<ol>
<li><p>DDL(Data Defined Language)</p>
<p> <code>数据定义语言 包括create,alter,drop操作，如数据库中创建数据对象，修改数据对象，删除数据对象。</code></p>
</li>
<li><p>DML(Data Manipulation Language)</p>
<p> <code>数据操作语言 包括对数据库的insert,update,delete操作</code></p>
</li>
<li><p>DQL(Data Query Language)</p>
<p> <code>数据查询语言 包括对数据库的select操作，用于获取表中的数据，包括where,group by,having,order by, left/right/inner (outer) join on 的自连接，子连接等。</code></p>
</li>
<li><p>DCL(Data Control Language)</p>
<p> <code>数据控制语言 包括grant，revoke，deny 操作，一般设置相关数据库对象访问权限</code></p>
</li>
</ol>
<p><strong>事务控制语言(TCL)关于数据完整性一致性的</strong></p>
<h2 id="数据库级别"><a href="#数据库级别" class="headerlink" title="数据库级别"></a>数据库级别</h2><p> 查询数据库：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">DATABASES</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">DATABASES</span> <span class="keyword">LIKE</span> <span class="string">'%yu%'</span> // 过滤显示 只显示含有关键词的</span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">DATABASES</span> <span class="keyword">LIKE</span> <span class="string">'yu%'</span>	// 过滤显示 只显示含有首部部有关键词的</span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">DATABASES</span> <span class="keyword">LIKE</span> <span class="string">'%yu'</span>	// 过滤显示 只显示含有尾部有关键词的</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span>  <span class="keyword">database</span>( );	// 获取自己目前所在的数据库</span><br></pre></td></tr></table></figure>

<p> 创建数据库：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> 数据库名;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> 数据库名 <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> 数据库名 <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span> gbk <span class="keyword">COLLATE</span> gbk_chinese_ci</span><br><span class="line"><span class="keyword">use</span> 数据库名;</span><br><span class="line"><span class="keyword">drop</span> 数据库名;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">DATABASE</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci;</span><br></pre></td></tr></table></figure>

<h2 id="表级别"><a href="#表级别" class="headerlink" title="表级别"></a>表级别</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">tables</span>;                                       // 查看表名和视图名</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">table</span> student2;                        // 查看创建语句</span><br><span class="line"></span><br><span class="line">desc 数据表名;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>  表名(nid <span class="built_in">int</span>, <span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">60</span>))</span><br><span class="line"></span><br><span class="line">// 复制表结构</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> 新表名 <span class="keyword">select</span> * <span class="keyword">from</span> 旧表名 <span class="keyword">where</span> <span class="number">1</span>=<span class="number">2</span>; // 复制表结构，不包括主键和自增</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> 新表名 <span class="keyword">like</span> 旧表名;                    // 复制表结构，包括主键和自增</span><br><span class="line"></span><br><span class="line">// 复制表结构和表数据</span><br><span class="line">creat table 新表名 <span class="keyword">select</span> * <span class="keyword">form</span> 旧表名;            // 复制整个表结构和表数据到新表        </span><br><span class="line"></span><br><span class="line">// 复制表数据</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> 新表名 <span class="keyword">select</span> * <span class="keyword">from</span> 旧表名;            // 复制整个表数据到新表，前提表结构要一致，但字段名可以不同</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> 新表名(字段<span class="number">1</span>,字段<span class="number">2</span>) <span class="keyword">select</span> 字段<span class="number">1</span>,字段<span class="number">2</span> <span class="keyword">from</span> 旧表名;      // 复制指定的部分表数据到新表，指定的字段的数据类型和字段数量要对应一致，字段名可以不同</span><br><span class="line"></span><br><span class="line"><span class="keyword">rename</span> <span class="keyword">table</span> 原数据库名 <span class="keyword">to</span> 新数据库名;			  // 修改数据表名 方法一	</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 原数据库名 remove 新数据库名;			  // 修改数据表名 方法二</span><br><span class="line"></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">modify</span> 字段名 数据类型;			  // 修改字段的类型</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">add</span> 字段名 数据类型;			  // 给表添加一个字段</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">add</span> 字段名 数据类型 <span class="keyword">after</span> 字段一名;	// 给表添加一个字段在字段一后</span><br><span class="line"></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">drop</span> 字段名;					 // 删除字段</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">change</span> 旧列名 新列名 新类型;		 // 修改列名</span><br><span class="line"></span><br><span class="line">// 清空表</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> 表名;								// 只会清空表数据，自增不会归零</span><br><span class="line"><span class="keyword">truncate</span> <span class="keyword">table</span> 表名;							// 会清空表结构和表数据，即自增归零</span><br><span class="line"></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">variables</span> <span class="keyword">like</span> <span class="string">'char%'</span>;					// 查看数据类型的编码方式</span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span> <span class="keyword">names</span> gbk;								   // 设置编码方式</span><br></pre></td></tr></table></figure>

<h3 id="约束"><a href="#约束" class="headerlink" title="约束"></a>约束</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">a.默认值</span><br><span class="line"></span><br><span class="line">b.是否可以为空</span><br><span class="line"></span><br><span class="line">c.自增列（一张表只能有一个，数字，必须是索引-主键（主键索引））</span><br><span class="line"></span><br><span class="line">d.主键索引：</span><br><span class="line">一张表只能有一个主键唯一不能重复，不能为null，一般情况下，自增列设置主键</span><br><span class="line"><span class="code">	唯一索引：unique</span></span><br><span class="line"><span class="code">	nid int not null unique,</span></span><br><span class="line"></span><br><span class="line"><span class="code">		可以为null，一张表可以有多个唯一列</span></span><br><span class="line"><span class="code">	1,2,3,4,5,6,null</span></span><br><span class="line"></span><br><span class="line">-- 约束</span><br><span class="line">-- 索引，加速查找</span><br><span class="line"></span><br><span class="line">e.外键foreign key,一对多</span><br><span class="line"><span class="code">	两张表建立约束</span></span><br><span class="line"></span><br><span class="line"><span class="code">	--约束</span></span><br><span class="line"><span class="code">	--foreign key,一对多</span></span><br><span class="line"></span><br><span class="line">f.数据类型：数值 、时间和字符串</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> xxx(</span><br><span class="line">	nid ... primary <span class="keyword">key</span>,</span><br><span class="line">	...</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student(</span><br><span class="line">	<span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">10</span>) <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">	<span class="keyword">num</span> <span class="built_in">int</span> <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">	age <span class="built_in">int</span>,</span><br><span class="line">	gender <span class="built_in">int</span>,</span><br><span class="line">	primary <span class="keyword">key</span> (<span class="keyword">name</span>, <span class="keyword">num</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<ul>
<li>非空约束：<br>  <code>not null</code></li>
</ul>
<pre><code>name num age
 a   88   9
 a   99   9

 a   88   0        # 不符合</code></pre><ul>
<li>主键:</li>
</ul>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">不能为null，</span><br><span class="line">不能重复，</span><br><span class="line">一张表只有一个主键（可以多列组成主键）</span><br></pre></td></tr></table></figure>

<p>一般用法：</p>
<p><code>nid int auto_increment primary key,</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb5(</span><br><span class="line">	nid <span class="built_in">int</span> <span class="keyword">not</span> <span class="literal">null</span> auto_increment primary <span class="keyword">key</span>,</span><br><span class="line">	<span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">16</span>),</span><br><span class="line">	age <span class="built_in">int</span> <span class="keyword">default</span> <span class="number">19</span></span><br><span class="line">)<span class="keyword">engine</span>=<span class="keyword">innodb</span> <span class="keyword">default</span> <span class="keyword">charset</span>=utf8;</span><br></pre></td></tr></table></figure>

<ul>
<li>添加外键：</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> userinfo <span class="keyword">add</span> <span class="keyword">constraint</span> fk_u_p <span class="keyword">foreign</span> <span class="keyword">key</span> userinfo(part_id) <span class="keyword">references</span> part(nid);</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> 表名;		<span class="comment"># 直接删除表 (表结构也会删除) 不支持事务，不能回滚数据</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> 表名;		<span class="comment"># 速度慢，清空表内容 (表结构不删除)，自增不会回到原点，支持事务，可以回滚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">truncate</span> <span class="keyword">table</span> 表名;	<span class="comment"># 速度快，清空表内容 (表结构删除和重建)，自增回到原点，不支持事务，不能回滚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> 表名;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="数值："><a href="#数值：" class="headerlink" title="数值："></a>数值：</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">bit 二进制</span><br><span class="line">tinyint</span><br><span class="line">smallint</span><br><span class="line">int</span><br><span class="line">bigint</span><br></pre></td></tr></table></figure>

<h4 id="bit-M"><a href="#bit-M" class="headerlink" title="bit[(M)]"></a>bit[(M)]</h4><pre><code>二进制位（101001），m表示二进制位的长度（1-64），默认m＝1</code></pre><p>​    </p>
<h4 id="tinyint-m-unsigned-zerofill"><a href="#tinyint-m-unsigned-zerofill" class="headerlink" title="tinyint[(m)] [unsigned] [zerofill]"></a>tinyint[(m)] [unsigned] [zerofill]</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">小整数，数据类型用于保存一些范围的整数数值范围：</span><br><span class="line"></span><br><span class="line">有符号：</span><br><span class="line"></span><br><span class="line"><span class="code">	-128 ～ 127</span></span><br><span class="line"></span><br><span class="line">无符号：</span><br><span class="line"></span><br><span class="line"><span class="code">	0 ～ 255</span></span><br></pre></td></tr></table></figure>

<p><strong>特别的： MySQL中无布尔值，使用tinyint(1)构造。</strong></p>
<h4 id="int-m-unsigned-zerofill"><a href="#int-m-unsigned-zerofill" class="headerlink" title="int[(m)][unsigned][zerofill]"></a>int[(m)][unsigned][zerofill]</h4><pre><code>整数，数据类型用于保存一些范围的整数数值范围：

    有符号：-2147483648 ～ 2147483647

    无符号：0 ～ 4294967295</code></pre><p><strong>特别的：整数类型中的m仅用于显示，对存储范围无限制。例如： int(5),当插入数据2时，select 时数据显示为： 00002</strong></p>
<h4 id="bigint-m-unsigned-zerofill"><a href="#bigint-m-unsigned-zerofill" class="headerlink" title="bigint[(m)][unsigned][zerofill]"></a>bigint[(m)][unsigned][zerofill]</h4><pre><code>大整数，数据类型用于保存一些范围的整数数值范围：

    有符号：

                -9223372036854775808 ～ 9223372036854775807
    无符号：

                0  ～  18446744073709551615</code></pre><h4 id="decimal-m-d-unsigned-zerofill"><a href="#decimal-m-d-unsigned-zerofill" class="headerlink" title="decimal[(m[,d])] [unsigned] [zerofill]"></a>decimal[(m[,d])] [unsigned] [zerofill]</h4><pre><code>准确的小数值，m是数字总个数（负号不算），d是小数点后个数。 m最大值为65，d最大值为30。</code></pre><p><em>存储时超出规定范围，会在规定小数位数那里四舍五入来存储</em></p>
<p><strong>特别的：</strong></p>
<p><strong>对于精确数值计算时需要用此类型</strong></p>
<p><strong>decaimal能够存储精确值的原因在于其内部按照字符串存储。</strong></p>
<h4 id="FLOAT-M-D-UNSIGNED-ZEROFILL"><a href="#FLOAT-M-D-UNSIGNED-ZEROFILL" class="headerlink" title="FLOAT[(M,D)] [UNSIGNED] [ZEROFILL]"></a>FLOAT[(M,D)] [UNSIGNED] [ZEROFILL]</h4><p><em>存储时超出规定范围，会在规定小数位数那里截断来存储</em></p>
<pre><code>单精度浮点数（非准确小数值），m是数字总个数，d是小数点后个数。

无符号：</code></pre><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">-3.402823466E+38 to -1.175494351E-38,</span><br><span class="line"></span><br><span class="line">0</span><br><span class="line"></span><br><span class="line">1.175494351E-38 to 3.402823466E+38</span><br></pre></td></tr></table></figure>

<pre><code>有符号：</code></pre><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">0</span><br><span class="line"></span><br><span class="line">1.175494351E-38 to 3.402823466E+38</span><br></pre></td></tr></table></figure>

<p><strong>数值越大，越不准确</strong></p>
<h4 id="DOUBLE-M-D-UNSIGNED-ZEROFILL"><a href="#DOUBLE-M-D-UNSIGNED-ZEROFILL" class="headerlink" title="DOUBLE[(M,D)] [UNSIGNED] [ZEROFILL]"></a>DOUBLE[(M,D)] [UNSIGNED] [ZEROFILL]</h4><pre><code>双精度浮点数（非准确小数值），m是数字总个数，d是小数点后个数。</code></pre><p>无符号：</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">-1.7976931348623157E+308 to -2.2250738585072014E-308</span><br><span class="line"></span><br><span class="line">0</span><br><span class="line"></span><br><span class="line">2.2250738585072014E-308 to 1.7976931348623157E+308</span><br></pre></td></tr></table></figure>

<p>有符号：</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">0</span><br><span class="line"></span><br><span class="line">2.2250738585072014E-308 to 1.7976931348623157E+308</span><br></pre></td></tr></table></figure>

<p><strong>数值越大，越不准确</strong></p>
<h3 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h3><h4 id="定长"><a href="#定长" class="headerlink" title="定长"></a>定长</h4><h4 id="char-m"><a href="#char-m" class="headerlink" title="char (m)"></a>char (m)</h4><pre><code>char数据类型用于表示固定长度的字符串，可以包含最多达255个字符。其中m代表字符串的长度。</code></pre><p><strong>PS: 即使数据小于m长度，也会占用m长度</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb13(n <span class="built_in">char</span>(<span class="number">7</span>),b <span class="built_in">int</span>,c <span class="built_in">int</span>)</span><br><span class="line"><span class="keyword">insert</span> ssss</span><br></pre></td></tr></table></figure>

<pre><code>查找速度快，浪费空间</code></pre><h4 id="变长"><a href="#变长" class="headerlink" title="变长"></a>变长</h4><h4 id="varchar-m"><a href="#varchar-m" class="headerlink" title="varchar(m)"></a>varchar(m)</h4><pre><code>varchars数据类型用于变长的字符串，可以包含最多达255个字符。其中m代表该数据类型所允许保存的字符串的最大长度，只要长度小于该最大值的字符串都可以被保存在该数据类型中。</code></pre><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb13(n <span class="built_in">varchar</span>(<span class="number">7</span>),b <span class="built_in">int</span>,c <span class="built_in">int</span>)</span><br><span class="line"><span class="keyword">insert</span> ssss</span><br><span class="line"><span class="keyword">insert</span> sssssss</span><br><span class="line"><span class="keyword">insert</span> sssssssss</span><br></pre></td></tr></table></figure>

<pre><code>查找速度慢，节省空间</code></pre><p><strong>注：</strong></p>
<p><strong>虽然varchar使用起来较为灵活，但是从整个系统的性能角度来说，char数据类型的处理速度更快，有时甚至可以超出varchar处理速度的50%。因此，用户在设计数据库时应当综合考虑各方面的因素，以求达到最佳的平衡</strong></p>
<h3 id="enum"><a href="#enum" class="headerlink" title="enum"></a>enum</h3><pre><code>枚举类型（单选）
    An ENUM column can have a maximum of 65,535 distinct elements. (The practical limit is less than 3000.)</code></pre><p><strong>示例：</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> shirts (</span><br><span class="line">	<span class="keyword">name</span> <span class="built_in">VARCHAR</span>(<span class="number">40</span>),</span><br><span class="line">	<span class="keyword">size</span> ENUM(<span class="string">'x-small'</span>, <span class="string">'small'</span>, <span class="string">'medium'</span>, <span class="string">'large'</span>, <span class="string">'x-large'</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> shirts (<span class="keyword">name</span>, <span class="keyword">size</span>) <span class="keyword">VALUES</span> (<span class="string">'dress shirt'</span>,<span class="string">'large'</span>), (<span class="string">'t-shirt'</span>,<span class="string">'medium'</span>),(<span class="string">'polo shirt'</span>,<span class="string">'small'</span>);</span><br></pre></td></tr></table></figure>

<h3 id="set"><a href="#set" class="headerlink" title="set"></a>set</h3><pre><code>集合类型（多选）

    A SET column can have a maximum of 64 distinct members.</code></pre><p><strong>示例：</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> myset (<span class="keyword">col</span> <span class="keyword">SET</span>(<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>));</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> myset (<span class="keyword">col</span>) <span class="keyword">VALUES</span> (<span class="string">'a,d'</span>), (<span class="string">'d,a'</span>), (<span class="string">'a,d,a'</span>), (<span class="string">'a,d,d'</span>), (<span class="string">'d,a,d'</span>);</span><br></pre></td></tr></table></figure>

<h3 id="二进制数据："><a href="#二进制数据：" class="headerlink" title="二进制数据："></a>二进制数据：</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">TinyBlob、Blob、MediumBlob、LongBlob</span><br></pre></td></tr></table></figure>

<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="bullet">* </span>上传数据</span><br><span class="line"><span class="bullet">* </span>Blob，强制二进制方式</span><br><span class="line"><span class="bullet">* </span>varchar(65), “D:\home.avi”将上传的文件保存在硬盘，D:\home.avi</span><br></pre></td></tr></table></figure>

<h3 id="文本"><a href="#文本" class="headerlink" title="文本"></a>文本</h3><h4 id="text"><a href="#text" class="headerlink" title="text"></a>text</h4><pre><code>text数据类型用于保存变长的大字符串，可以组多到65535 (2**16 − 1)个字符。</code></pre><h4 id="mediumtext"><a href="#mediumtext" class="headerlink" title="mediumtext"></a>mediumtext</h4><pre><code>A TEXT column with a maximum length of 16,777,215 (2**24 − 1) characters.</code></pre><h4 id="longtext"><a href="#longtext" class="headerlink" title="longtext"></a>longtext</h4><pre><code>A TEXT column with a maximum length of 4,294,967,295 or 4GB (2**32 − 1) characters.</code></pre><h3 id="DATE"><a href="#DATE" class="headerlink" title="DATE"></a>DATE</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">YYYY-MM-DD（1000-01-01/9999-12-31）</span><br></pre></td></tr></table></figure>

<h3 id="日期时间"><a href="#日期时间" class="headerlink" title="日期时间"></a>日期时间</h3><h4 id="TIME"><a href="#TIME" class="headerlink" title="TIME"></a>TIME</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">HH:MM:SS（'-838:59:59'/'838:59:59'）</span><br></pre></td></tr></table></figure>

<h4 id="YEAR"><a href="#YEAR" class="headerlink" title="YEAR"></a>YEAR</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">YYYY（1901/2155）</span><br></pre></td></tr></table></figure>

<h4 id="DATETIME"><a href="#DATETIME" class="headerlink" title="DATETIME"></a>DATETIME</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">YYYY-MM-DD HH:MM:SS（1000-01-01 00:00:00/9999-12-31 23:59:59）</span><br></pre></td></tr></table></figure>

<h4 id="TIMESTAMP"><a href="#TIMESTAMP" class="headerlink" title="TIMESTAMP"></a>TIMESTAMP</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">YYYYMMDD HHMMSS（1970-01-01 00:00:00/2038-01-19 11:14:07(2037 年某时)）</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><p>插入 insert(‘helloworld’,1,2,’abcd’) // 从下标1开始</p>
<hr>
<h2 id="数据行级别"><a href="#数据行级别" class="headerlink" title="数据行级别"></a>数据行级别</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> 表名;</span><br><span class="line"></span><br><span class="line">添加列：<span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">add</span> 列名 类型</span><br><span class="line">删除列：<span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">drop</span> <span class="keyword">column</span> 列名</span><br><span class="line">修改列：</span><br><span class="line">		<span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">modify</span> <span class="keyword">column</span> 列名 类型;  <span class="comment">-- 类型</span></span><br><span class="line">		<span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">change</span> 原列名 新列名 类型; <span class="comment">-- 列名，类型</span></span><br><span class="line">  </span><br><span class="line">添加主键：</span><br><span class="line">		<span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">add</span> primary <span class="keyword">key</span>(列名);</span><br><span class="line">删除主键：</span><br><span class="line">		<span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">drop</span> primary <span class="keyword">key</span>;</span><br><span class="line">		<span class="keyword">alter</span> <span class="keyword">table</span> 表名  <span class="keyword">modify</span>  列名 <span class="built_in">int</span>, <span class="keyword">drop</span> primary <span class="keyword">key</span>;</span><br><span class="line">  </span><br><span class="line">添加外键：<span class="keyword">alter</span> <span class="keyword">table</span> 从表 <span class="keyword">add</span> <span class="keyword">constraint</span> 外键名称（形如：FK_从表_主表） <span class="keyword">foreign</span> <span class="keyword">key</span> 从表(外键字段) <span class="keyword">references</span> 主表(主键字段);</span><br><span class="line">删除外键：<span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">drop</span> <span class="keyword">foreign</span> <span class="keyword">key</span> 外键名称</span><br><span class="line">  </span><br><span class="line">修改默认值：<span class="keyword">ALTER</span> <span class="keyword">TABLE</span> testalter_tbl <span class="keyword">ALTER</span> i <span class="keyword">SET</span> <span class="keyword">DEFAULT</span> <span class="number">1000</span>;</span><br><span class="line">删除默认值：<span class="keyword">ALTER</span> <span class="keyword">TABLE</span> testalter_tbl <span class="keyword">ALTER</span> i <span class="keyword">DROP</span> <span class="keyword">DEFAULT</span>;</span><br></pre></td></tr></table></figure>

<h5 id="1-增"><a href="#1-增" class="headerlink" title="1.增"></a>1.增</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tb1(<span class="keyword">name</span>,age) <span class="keyword">values</span>(<span class="string">'alex'</span>,<span class="number">18</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tb2(<span class="keyword">name</span>,age) <span class="keyword">values</span>(<span class="string">'alex'</span>,<span class="number">18</span>),(<span class="string">'eric'</span>,<span class="number">19</span>),(<span class="string">'got'</span>,<span class="number">20</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb6(</span><br><span class="line">	nid <span class="built_in">int</span> <span class="keyword">not</span> <span class="literal">null</span> auto_increment primary <span class="keyword">key</span>,</span><br><span class="line">	<span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">20</span>),</span><br><span class="line">	age <span class="built_in">int</span></span><br><span class="line">)<span class="keyword">engine</span>=<span class="keyword">innodb</span> <span class="keyword">default</span> <span class="keyword">charset</span>=utf8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb7(</span><br><span class="line">	nid <span class="built_in">int</span> <span class="keyword">not</span> <span class="literal">null</span> auto_increment primary <span class="keyword">key</span>,</span><br><span class="line">	caption <span class="built_in">varchar</span>(<span class="number">20</span>),</span><br><span class="line">	gender <span class="built_in">varchar</span>(<span class="number">20</span>)</span><br><span class="line">)<span class="keyword">engine</span>=<span class="keyword">innodb</span> <span class="keyword">default</span> <span class="keyword">charset</span>=utf8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tb7(caption,gender)<span class="keyword">values</span>(<span class="string">'kakap'</span>,<span class="string">'1'</span>),(<span class="string">'hu'</span>,<span class="string">'2'</span>),(<span class="string">'fafa'</span>,<span class="string">'2'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tb6(<span class="keyword">name</span>,age)<span class="keyword">select</span> caption,gender <span class="keyword">from</span> tb7;		<span class="comment"># 将tb7中选中的数据插入到tb6中的指定位置（前提类型对应得能转换）</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tb6(<span class="keyword">name</span>,age)<span class="keyword">select</span> caption,caption <span class="keyword">from</span> tb7;		<span class="comment"># 会报错。。原因：类型不一致，且无法转换</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tb6(<span class="keyword">name</span>,age)<span class="keyword">select</span> caption,nid <span class="keyword">from</span> tb7;</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tb6(<span class="keyword">name</span>,age)<span class="keyword">select</span> caption,gender <span class="keyword">from</span> tb7 <span class="keyword">where</span> nid&gt;<span class="number">2</span>;</span><br></pre></td></tr></table></figure>

<h5 id="2-删"><a href="#2-删" class="headerlink" title="2.删"></a>2.删</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> tb7 <span class="keyword">where</span> nid=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> tb7 <span class="keyword">where</span> <span class="keyword">name</span>=<span class="string">'kakap'</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> tb7 <span class="keyword">where</span> <span class="keyword">name</span>=<span class="string">'kakap'</span> <span class="keyword">and</span> nid=<span class="number">5</span>;</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> tb7 <span class="keyword">where</span> <span class="keyword">name</span>=<span class="string">'kakap'</span> <span class="keyword">or</span> nid=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> tb7 <span class="keyword">where</span> nid&lt;<span class="number">2</span>;</span><br></pre></td></tr></table></figure>

<h5 id="3-改"><a href="#3-改" class="headerlink" title="3.改"></a>3.改</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">update</span> tb7 <span class="keyword">set</span> age=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">update</span> tb7 <span class="keyword">set</span> age=<span class="number">2</span> <span class="keyword">where</span> nid=<span class="number">10</span>;</span><br><span class="line"><span class="keyword">update</span> tb7 <span class="keyword">set</span> age=<span class="number">12</span>,<span class="keyword">name</span>=<span class="string">'opoo'</span> <span class="keyword">where</span> nid &gt;<span class="number">12</span>;</span><br></pre></td></tr></table></figure>

<h5 id="4-查"><a href="#4-查" class="headerlink" title="4.查"></a>4.查</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tb7;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tb7 <span class="keyword">where</span> nid&gt;=<span class="number">2</span>;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tb7 <span class="keyword">where</span> nid&lt;=<span class="number">5</span> <span class="keyword">name</span>=<span class="string">'hu'</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">name</span>,age,nid <span class="keyword">from</span> <span class="keyword">where</span> nid&lt;=<span class="number">3</span>;</span><br></pre></td></tr></table></figure>

<p><strong>PS:尽量不要用select * from … 因为它效率低，要想查询全部项，可以吧每一项名称列出来。。。</strong></p>
<h5 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">a. 条件</span><br><span class="line"><span class="code">    select * from 表 where id &gt; 1 and name != 'alex' and num = 12;</span></span><br><span class="line"> </span><br><span class="line"><span class="code">    select * from 表 where id between 5 and 16;</span></span><br><span class="line"> </span><br><span class="line"><span class="code">    select * from 表 where id in (11,22,33)</span></span><br><span class="line"><span class="code">    select * from 表 where id not in (11,22,33)</span></span><br><span class="line"><span class="code">    select * from 表 where id in (select nid from 表)</span></span><br></pre></td></tr></table></figure>

<p><strong>注意：where里不能使用聚合函数(如max(),min(),avg(),count()等</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> b. 通配符</span><br><span class="line">    <span class="keyword">select</span> * <span class="keyword">from</span> 表 <span class="keyword">where</span> <span class="keyword">name</span> <span class="keyword">like</span> <span class="string">'ale%'</span>  - ale开头的所有（多个字符串）</span><br><span class="line">    <span class="keyword">select</span> * <span class="keyword">from</span> 表 <span class="keyword">where</span> <span class="keyword">name</span> <span class="keyword">like</span> <span class="string">'ale_'</span>  - ale开头的所有（一个字符）</span><br><span class="line"> </span><br><span class="line">c. 限制</span><br><span class="line">    <span class="keyword">select</span> * <span class="keyword">from</span> 表 <span class="keyword">limit</span> <span class="number">5</span>;            - 前5行</span><br><span class="line">    <span class="keyword">select</span> * <span class="keyword">from</span> 表 <span class="keyword">limit</span> <span class="number">4</span>,<span class="number">5</span>;          - 从第4行开始的5行</span><br><span class="line">    <span class="keyword">select</span> * <span class="keyword">from</span> 表 <span class="keyword">limit</span> <span class="number">5</span> <span class="keyword">offset</span> <span class="number">4</span>    - 从第<span class="number">4</span>行开始的<span class="number">5</span>行	***推荐用***</span><br></pre></td></tr></table></figure>

<p><strong>翻页</strong></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="code">	页码：pageNo   </span></span><br><span class="line"><span class="code">	页面容量：pageSize</span></span><br><span class="line"><span class="code">	总记录数: cnt</span></span><br><span class="line"><span class="code">	到数据库中取 哪些数据limit (pageNo-1)*pageSize ,pageSize; </span></span><br><span class="line"><span class="code">	总页数  totalpage = (cnt%pageSize==0)?(cnt/pageSize):(cnt/pageSize+1);   =尾页 </span></span><br><span class="line"> </span><br><span class="line">d. 排序</span><br><span class="line"><span class="code">    select * from 表 order by 列 asc              - 根据 “列” 从小到大排列</span></span><br><span class="line"><span class="code">    select * from 表 order by 列 desc             - 根据 “列” 从大到小排列</span></span><br><span class="line"><span class="code">    select * from 表 order by 列1 desc,列2 asc    - 根据 “列1” 从大到小排列，如果相同则按列2从小到大排序</span></span><br><span class="line"> </span><br><span class="line">e. 分组</span><br><span class="line"><span class="code">    select num from 表 group by num</span></span><br><span class="line"><span class="code">    select num,nid from 表 group by num,nid</span></span><br><span class="line"><span class="code">    select num,nid from 表  where nid &gt; 10 group by num,nid order nid desc</span></span><br><span class="line"><span class="code">    select num,nid,count(*),sum(num),max(num),min(num),agv(num) from 表 group by num,nid</span></span><br><span class="line"> </span><br><span class="line"><span class="code">    select num from 表 group by num having max(id) &gt; 10</span></span><br><span class="line"><span class="code">	select num as a,count(nid) as b from group by part			//as 可以省略</span></span><br></pre></td></tr></table></figure>

<p><strong>特别的：group by必须在where之后，order by之前</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">	group by + group_concat()</span><br><span class="line">	group_concat(字段名)可以作为一个输出字段来使用，表示分组之后，根据分组结果，使用group_concat()来放置每一组的某字段的值的集合</span><br><span class="line">	</span><br><span class="line">	典例：	</span><br><span class="line">	<span class="keyword">select</span> sex <span class="keyword">from</span> employee <span class="keyword">group</span> <span class="keyword">by</span> sex;</span><br><span class="line">	+<span class="comment">------+</span></span><br><span class="line">	| sex  |</span><br><span class="line">	+<span class="comment">------+</span></span><br><span class="line">	| 女   |</span><br><span class="line">	| 男   |</span><br><span class="line">	+<span class="comment">------+</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">select</span> sex,<span class="keyword">group_concat</span>(<span class="keyword">name</span>) <span class="keyword">from</span> employee <span class="keyword">group</span> <span class="keyword">by</span> sex;</span><br><span class="line">	+<span class="comment">------+--------------------+</span></span><br><span class="line">	| sex  | group_concat(name) |</span><br><span class="line">	+<span class="comment">------+--------------------+</span></span><br><span class="line">	| 女   | 李四               |</span><br><span class="line">	| 男   | 张三,王五,Aric     |</span><br><span class="line">	+<span class="comment">------+--------------------+</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">select</span> sex,<span class="keyword">group_concat</span>(d_id) <span class="keyword">from</span> employee <span class="keyword">group</span> <span class="keyword">by</span> sex;</span><br><span class="line">	+<span class="comment">------+--------------------+</span></span><br><span class="line">	| sex  | group_concat(d_id) |</span><br><span class="line">	+<span class="comment">------+--------------------+</span></span><br><span class="line">	| 女   | 1002               |</span><br><span class="line">	| 男   | 1001,1003,1004     |</span><br><span class="line">	+<span class="comment">------+--------------------+</span></span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">f. 连表</span><br><span class="line"></span><br><span class="line">    无对应关系则不显示</span><br><span class="line">    <span class="keyword">select</span> A.num, A.name, B.name</span><br><span class="line">    <span class="keyword">from</span> A,B</span><br><span class="line">    <span class="keyword">WHERE</span> A.nid = B.nid</span><br></pre></td></tr></table></figure>

<p><img src="pic/sqljoin.png" alt="avatar"><br> <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line">     无对应关系则不显示</span><br><span class="line">    <span class="keyword">select</span> A.num, A.name, B.name</span><br><span class="line">    <span class="keyword">from</span> A <span class="keyword">INNER</span> <span class="keyword">JOIN</span> B			<span class="comment"># 对Right数据进行过滤，去除掉NULL</span></span><br><span class="line">    <span class="keyword">ON</span> A.nid = B.nid</span><br><span class="line"> </span><br><span class="line">    A表所有显示，如果B中无对应关系，则值为<span class="literal">null</span></span><br><span class="line">    <span class="keyword">select</span> A.num, A.name, B.name		***<span class="comment">###优先用</span></span><br><span class="line">    <span class="keyword">from</span> A <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> B</span><br><span class="line">    <span class="keyword">ON</span> A.nid = B.nid</span><br><span class="line">	</span><br><span class="line">    <span class="keyword">select</span> A.num, A.name, B.name</span><br><span class="line">    <span class="keyword">from</span> A <span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> B			<span class="comment"># 对LEFT数据进行过滤，去除掉NULL</span></span><br><span class="line">    <span class="keyword">ON</span> A.nid = B.nid</span><br><span class="line"> </span><br><span class="line">    B表所有显示，如果B中无对应关系，则值为<span class="literal">null</span></span><br><span class="line">    <span class="keyword">select</span> A.num, A.name, B.name</span><br><span class="line">    <span class="keyword">from</span> A <span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> B</span><br><span class="line">    <span class="keyword">ON</span> A.nid = B.nid</span><br><span class="line">	</span><br><span class="line">	* 自连接</span><br><span class="line">	<span class="keyword">select</span> A.id B.t_id <span class="keyword">from</span> <span class="keyword">self</span> <span class="string">'A'</span> <span class="keyword">left</span> <span class="keyword">join</span> <span class="keyword">self</span> <span class="string">'B'</span> <span class="keyword">on</span> A.tid = B.id;</span><br><span class="line"> </span><br><span class="line">g. 组合</span><br><span class="line">    组合，自动处理重合</span><br><span class="line">    <span class="keyword">select</span> nickname</span><br><span class="line">    <span class="keyword">from</span> A</span><br><span class="line">    <span class="keyword">union</span></span><br><span class="line">    <span class="keyword">select</span> <span class="keyword">name</span></span><br><span class="line">    <span class="keyword">from</span> B</span><br><span class="line"> </span><br><span class="line">    组合，不处理重合</span><br><span class="line">    <span class="keyword">select</span> nickname</span><br><span class="line">    <span class="keyword">from</span> A</span><br><span class="line">    <span class="keyword">union</span> <span class="keyword">all</span></span><br><span class="line">    <span class="keyword">select</span> <span class="keyword">name</span></span><br><span class="line">    <span class="keyword">from</span> B</span><br><span class="line">	</span><br><span class="line">	条件：</span><br><span class="line">		&gt; &lt; = &gt;= != &lt;=</span><br><span class="line">		<span class="keyword">in</span> (<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line">		<span class="keyword">not</span> <span class="keyword">in</span> (...)</span><br><span class="line">		<span class="keyword">in</span> (<span class="keyword">select</span> nid <span class="keyword">from</span> tb1)</span><br><span class="line">		</span><br><span class="line"><span class="comment">---------------------------------------</span></span><br><span class="line">	<span class="keyword">select</span> t.name,t.sex</span><br><span class="line">	<span class="keyword">from</span> stu t</span><br><span class="line">	<span class="keyword">union</span></span><br><span class="line">	<span class="keyword">select</span> c.teacher,c.cname</span><br><span class="line">	<span class="keyword">from</span> <span class="keyword">class</span> c;</span><br><span class="line">	</span><br><span class="line">	+<span class="comment">-----------+----------+</span></span><br><span class="line">	| name      | sex      |</span><br><span class="line">	+<span class="comment">-----------+----------+</span></span><br><span class="line">	| 李四      | 男       |</span><br><span class="line">	| 田七      | 女       |</span><br><span class="line">	| 赵六      | 男       |</span><br><span class="line">	| 陈老师    | 1902Java |</span><br><span class="line">	| 李老师    | 1903Java |</span><br><span class="line">	| 吴老师    | 1904Java |</span><br><span class="line">	| 于老师    | 1902UI   |</span><br><span class="line">	| 方老师    | 1901C++  |</span><br><span class="line">	+<span class="comment">-----------+----------+</span></span><br><span class="line">	8 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"><span class="comment">--------------------------------------</span></span><br><span class="line"></span><br><span class="line">h. 列转行</span><br><span class="line">	<span class="keyword">SELECT</span></span><br><span class="line">		student_id <span class="keyword">AS</span> <span class="keyword">SID</span>,</span><br><span class="line">		<span class="keyword">MAX</span>( <span class="keyword">CASE</span> course_id <span class="keyword">WHEN</span> <span class="number">1</span> <span class="keyword">THEN</span> <span class="keyword">num</span> <span class="keyword">ELSE</span> <span class="number">0</span> <span class="keyword">END</span> ) <span class="keyword">AS</span> 物理 </span><br><span class="line">	<span class="keyword">FROM</span></span><br><span class="line">		score </span><br><span class="line">	<span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">		student_id;</span><br><span class="line">		</span><br><span class="line">	<span class="keyword">SELECT</span> </span><br><span class="line">		<span class="keyword">user</span>,</span><br><span class="line">		<span class="keyword">MAX</span>(<span class="keyword">CASE</span> course_id <span class="keyword">WHEN</span> <span class="string">"数学"</span> <span class="keyword">THEN</span> score <span class="keyword">ELSE</span> <span class="number">0</span> <span class="keyword">END</span>) <span class="keyword">as</span> <span class="string">'数学'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">i. 行转列</span><br><span class="line">    <span class="keyword">select</span> <span class="keyword">user</span>,<span class="string">'语文'</span> <span class="keyword">AS</span> course , cn_score <span class="keyword">AS</span> score <span class="keyword">from</span> <span class="keyword">test</span></span><br><span class="line">    <span class="keyword">union</span></span><br><span class="line">    <span class="keyword">select</span> <span class="keyword">user</span>,<span class="string">'数学'</span> <span class="keyword">AS</span> course, math_score <span class="keyword">AS</span> score <span class="keyword">from</span> <span class="keyword">test</span></span><br><span class="line">    <span class="keyword">union</span></span><br><span class="line">    <span class="keyword">select</span> <span class="keyword">user</span>,<span class="string">'英语'</span> <span class="keyword">AS</span> course, en_score <span class="keyword">AS</span> score <span class="keyword">from</span> <span class="keyword">test</span></span><br><span class="line">    <span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">user</span>,course;</span><br></pre></td></tr></table></figure></p>
<h5 id="会话"><a href="#会话" class="headerlink" title="会话"></a>会话</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">设置会话变量有三种：</span><br><span class="line"><span class="keyword">set</span> <span class="keyword">session</span> var_name = <span class="keyword">value</span>;</span><br><span class="line"><span class="keyword">set</span> @@session.var_name = <span class="keyword">value</span>;</span><br><span class="line"><span class="keyword">set</span> var_name = <span class="keyword">value</span>;</span><br><span class="line">查看一个会话变量也有如下三种方式：</span><br><span class="line"><span class="keyword">select</span> @@var_name;</span><br><span class="line"><span class="keyword">select</span> @@session.var_name;</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">session</span> <span class="keyword">variables</span> <span class="keyword">like</span> <span class="string">'%var%'</span>;</span><br><span class="line">查看系统中所有的会话变量</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">session</span> <span class="keyword">variables</span>;</span><br></pre></td></tr></table></figure>

<h2 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h2><blockquote>
<p>事务是一个最小的不可再分的工作单元<br>一个事务对应一个完整业务(如：银行账户转账业务)</p>
</blockquote>
<h4 id="ACID特性"><a href="#ACID特性" class="headerlink" title="ACID特性"></a>ACID特性</h4><ul>
<li>原子性(atomic) </li>
<li>一致性(consistency)</li>
<li>隔离性(isolation)</li>
<li>持久性(durability)</li>
</ul>
<ol>
<li>事务 - 长期有效</li>
</ol>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">// 将自动提交改成手动提交，对多次操作有效，只要没执行set autocommit = 1，当前数据库数据的提交状态始终是手动提交</span><br><span class="line">set autocommit = 0;  // 关闭自动提交，设置手动提交</span><br><span class="line">savepoint 回滚点名;  // 设置回滚点</span><br><span class="line">commit               // 提交剩余正确的事务</span><br><span class="line">rollback to 回滚点名 // 回滚到指定回滚点</span><br><span class="line">set autocommit = 1;  // 开启自动提交，取消手动提交,同时做了一个commit操作</span><br></pre></td></tr></table></figure>

<p><strong>注意：回滚仅能撤销未commit的操作，在commit之前设置的回滚点会失效</strong></p>
<ol start="2">
<li>事务 - 仅对单次事务有效<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">start transaction    // 开启事务</span><br><span class="line">rollback             // 回滚事务</span><br><span class="line">commit               // 提交事务</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p><strong>start transaction 开启事务后，变成手动提交，在遇到rollback或commit后就自动关闭了事务，变回自动提交</strong></p>
<p><strong>脏读</strong></p>
<h1 id="五、数据库管理"><a href="#五、数据库管理" class="headerlink" title="五、数据库管理"></a>五、数据库管理</h1><h3 id="运用Navicat管理数据库"><a href="#运用Navicat管理数据库" class="headerlink" title="运用Navicat管理数据库"></a>运用Navicat管理数据库</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">连接数据库</span><br><span class="line">-- 查找</span><br><span class="line">-- 修改</span><br><span class="line">-- 更新</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h3 id="数据库备份与恢复"><a href="#数据库备份与恢复" class="headerlink" title="数据库备份与恢复"></a>数据库备份与恢复</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">导出数据库：</span><br><span class="line">	未登录状态下：</span><br><span class="line">		mysqldump -u用户名 -p密码 数据库名称 &gt;导出文件路径           # 结构+数据</span><br><span class="line">		mysqldump -u用户名 -p密码 -d 数据库名称 &gt;导出文件路径        # 结构 </span><br><span class="line"></span><br><span class="line">导入数据库:</span><br><span class="line">	未登录状态下：</span><br><span class="line">		mysqldump -uroot -p密码  数据库名称 &lt;文件路径</span><br><span class="line">	登录状态下：</span><br><span class="line">		source 文件路径</span><br><span class="line">	</span><br><span class="line">补充</span><br><span class="line">	- avg()获取平均值</span><br><span class="line">		<span class="keyword">select</span> student</span><br></pre></td></tr></table></figure>

<p>作业：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">3	mysql&gt; select student_id,avg(num) from score group by student_id having avg(num)&gt;60;</span><br><span class="line">	+<span class="comment">------------+----------+</span></span><br><span class="line">	| student_id | avg(num) |</span><br><span class="line">	+<span class="comment">------------+----------+</span></span><br><span class="line">	|          3 |  82.2500 |</span><br><span class="line">	|          4 |  64.2500 |</span><br><span class="line">	|          5 |  64.2500 |</span><br><span class="line">	|          6 |  69.0000 |</span><br><span class="line">	|          7 |  66.0000 |</span><br><span class="line">	|          8 |  66.0000 |</span><br><span class="line">	|          9 |  67.0000 |</span><br><span class="line">	|         10 |  74.2500 |</span><br><span class="line">	|         11 |  74.2500 |</span><br><span class="line">	|         12 |  74.2500 |</span><br><span class="line">	|         13 |  87.0000 |</span><br><span class="line">	+<span class="comment">------------+----------+</span></span><br><span class="line">	11 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="number">4</span>	mysql&gt; <span class="keyword">select</span> student.sid,student.sname,<span class="keyword">sum</span>(course_id),<span class="keyword">sum</span>(<span class="keyword">num</span>) <span class="keyword">from</span> score</span><br><span class="line">		-&gt; <span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> student <span class="keyword">on</span> student.sid=score.student_id</span><br><span class="line">		-&gt; <span class="keyword">group</span> <span class="keyword">by</span> student_id;</span><br><span class="line">	+<span class="comment">------+-------+----------------+----------+</span></span><br><span class="line">	| sid  | sname | sum(course_id) | sum(num) |</span><br><span class="line">	+<span class="comment">------+-------+----------------+----------+</span></span><br><span class="line">	|    1 | 理解  |              7 |       85 |</span><br><span class="line">	|    2 | 钢蛋  |              8 |      175 |</span><br><span class="line">	|    3 | 张三  |             10 |      329 |</span><br><span class="line">	|    4 | 张一  |             10 |      257 |</span><br><span class="line">	|    5 | 张二  |             10 |      257 |</span><br><span class="line">	|    6 | 张四  |             10 |      276 |</span><br><span class="line">	|    7 | 铁锤  |             10 |      264 |</span><br><span class="line">	|    8 | 李三  |             10 |      264 |</span><br><span class="line">	|    9 | 李一  |             10 |      268 |</span><br><span class="line">	|   10 | 李二  |             10 |      297 |</span><br><span class="line">	|   11 | 李四  |             10 |      297 |</span><br><span class="line">	|   12 | 如花  |             10 |      297 |</span><br><span class="line">	|   13 | 刘三  |              3 |       87 |</span><br><span class="line">	+<span class="comment">------+-------+----------------+----------+</span></span><br><span class="line">	13 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line">	</span><br><span class="line"><span class="number">5</span>	mysql&gt; <span class="keyword">select</span> <span class="keyword">count</span>(tname) <span class="keyword">as</span> <span class="keyword">num</span> <span class="keyword">from</span> teacher <span class="keyword">where</span> tname <span class="keyword">like</span> <span class="string">'李%'</span>;</span><br><span class="line">	+<span class="comment">-----+</span></span><br><span class="line">	| num |</span><br><span class="line">	+<span class="comment">-----+</span></span><br><span class="line">	|   2 |</span><br><span class="line">	+<span class="comment">-----+</span></span><br><span class="line">	1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line">	</span><br><span class="line"><span class="number">6</span>	</span><br><span class="line"></span><br><span class="line">	</span><br><span class="line"><span class="number">7</span>	mysql&gt; <span class="keyword">select</span> * <span class="keyword">from</span> (</span><br><span class="line">		-&gt; <span class="keyword">select</span> score.student_id <span class="keyword">as</span> stid,</span><br><span class="line">		-&gt; student.sname <span class="keyword">as</span> stname</span><br><span class="line">		-&gt; <span class="keyword">from</span></span><br><span class="line">		-&gt; score</span><br><span class="line">		-&gt; <span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span></span><br><span class="line">		-&gt; student <span class="keyword">on</span></span><br><span class="line">		-&gt; score.student_id=student.sid</span><br><span class="line">		-&gt; <span class="keyword">where</span> score.course_id=<span class="number">1</span> <span class="keyword">or</span> score.course_id=<span class="number">2</span></span><br><span class="line">		-&gt; ) <span class="keyword">as</span> v</span><br><span class="line">		-&gt; <span class="keyword">group</span> <span class="keyword">by</span> stid</span><br><span class="line">		-&gt; <span class="keyword">having</span> <span class="keyword">count</span>(stid)=<span class="number">2</span>;</span><br><span class="line">	+<span class="comment">------+--------+</span></span><br><span class="line">	| stid | stname |</span><br><span class="line">	+<span class="comment">------+--------+</span></span><br><span class="line">	|    1 | 理解   |</span><br><span class="line">	|    3 | 张三   |</span><br><span class="line">	|    4 | 张一   |</span><br><span class="line">	|    5 | 张二   |</span><br><span class="line">	|    6 | 张四   |</span><br><span class="line">	|    7 | 铁锤   |</span><br><span class="line">	|    8 | 李三   |</span><br><span class="line">	|    9 | 李一   |</span><br><span class="line">	|   10 | 李二   |</span><br><span class="line">	|   11 | 李四   |</span><br><span class="line">	|   12 | 如花   |</span><br><span class="line">	+<span class="comment">------+--------+</span></span><br><span class="line">	</span><br><span class="line">8	<span class="keyword">SELECT</span></span><br><span class="line">	student_id,</span><br><span class="line">	student.sname</span><br><span class="line">	<span class="keyword">FROM</span></span><br><span class="line">	(</span><br><span class="line">	<span class="keyword">SELECT</span></span><br><span class="line">		score.student_id <span class="keyword">AS</span> student_id,</span><br><span class="line">		teacher.tname <span class="keyword">AS</span> tname,</span><br><span class="line">		course.cname <span class="keyword">AS</span> cname</span><br><span class="line">	<span class="keyword">FROM</span></span><br><span class="line">		course</span><br><span class="line">		<span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> teacher <span class="keyword">ON</span> teacher.tid = course.teacher_id</span><br><span class="line">		<span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> score <span class="keyword">ON</span> score.course_id = course.cid</span><br><span class="line">	) <span class="keyword">AS</span> tb</span><br><span class="line">	<span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span></span><br><span class="line">	student <span class="keyword">ON</span></span><br><span class="line">	student.sid=tb.student_id</span><br><span class="line">	<span class="keyword">WHERE</span> tb.tname = <span class="string">'李平老师'</span></span><br><span class="line">	<span class="keyword">GROUP</span> <span class="keyword">BY</span> tb.student_id;</span><br><span class="line"></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">SELECT</span></span><br><span class="line">		student_id <span class="keyword">AS</span> <span class="keyword">SID</span>,</span><br><span class="line">		( <span class="keyword">SELECT</span> <span class="keyword">num</span> <span class="keyword">FROM</span> score <span class="keyword">AS</span> InnerTb <span class="keyword">WHERE</span> InnerTb.student_id = OuterTb.student_id <span class="keyword">AND</span> course_id = <span class="number">1</span> ) <span class="keyword">AS</span> 生物,</span><br><span class="line">		( <span class="keyword">SELECT</span> <span class="keyword">num</span> <span class="keyword">FROM</span> score <span class="keyword">AS</span> InnerTb <span class="keyword">WHERE</span> InnerTb.student_id = OuterTb.student_id <span class="keyword">AND</span> course_id = <span class="number">2</span> ) <span class="keyword">AS</span> 物理,</span><br><span class="line">		( <span class="keyword">SELECT</span> <span class="keyword">num</span> <span class="keyword">FROM</span> score <span class="keyword">AS</span> InnerTb <span class="keyword">WHERE</span> InnerTb.student_id = OuterTb.student_id <span class="keyword">AND</span> course_id = <span class="number">3</span> ) <span class="keyword">AS</span> 体育,</span><br><span class="line">		( <span class="keyword">SELECT</span> <span class="keyword">num</span> <span class="keyword">FROM</span> score <span class="keyword">AS</span> InnerTb <span class="keyword">WHERE</span> InnerTb.student_id = OuterTb.student_id <span class="keyword">AND</span> course_id = <span class="number">4</span> ) <span class="keyword">AS</span> 美术,</span><br><span class="line">		<span class="keyword">sum</span>( OuterTb.num ) <span class="keyword">AS</span> <span class="keyword">Sum</span>,</span><br><span class="line">		<span class="keyword">avg</span>( OuterTb.num ) <span class="keyword">AS</span> <span class="keyword">Avg</span> </span><br><span class="line">	<span class="keyword">FROM</span></span><br><span class="line">		score <span class="keyword">AS</span> OuterTb </span><br><span class="line">	<span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">		student_id </span><br><span class="line">	<span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">		<span class="keyword">Avg</span> <span class="keyword">ASC</span>;</span><br><span class="line"></span><br><span class="line">18 </span><br><span class="line">	<span class="keyword">SELECT</span></span><br><span class="line">	course_id,</span><br><span class="line">	<span class="keyword">MAX</span>(<span class="keyword">num</span>) <span class="keyword">as</span> <span class="keyword">Max</span>,</span><br><span class="line">	<span class="keyword">MIN</span>(<span class="keyword">num</span>) <span class="keyword">as</span> <span class="keyword">Min</span></span><br><span class="line">	<span class="keyword">from</span> score</span><br><span class="line">	<span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">	course_id;</span><br><span class="line">	</span><br><span class="line">19</span><br><span class="line">	<span class="keyword">select</span></span><br><span class="line">	student_id,</span><br><span class="line"></span><br><span class="line"><span class="number">20</span></span><br><span class="line">	<span class="keyword">SELECT</span></span><br><span class="line">	course.cname,</span><br><span class="line">	teacher.tname,</span><br><span class="line">	<span class="keyword">AVG</span>(score.num) <span class="keyword">as</span> <span class="keyword">Avg</span></span><br><span class="line">	<span class="keyword">FROM</span></span><br><span class="line">	course</span><br><span class="line">	<span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> teacher <span class="keyword">ON</span> teacher.tid=course.teacher_id</span><br><span class="line">	<span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> score <span class="keyword">ON</span> score.course_id=course.cid</span><br><span class="line">	<span class="keyword">GROUP</span> <span class="keyword">BY</span> course.cid</span><br><span class="line">	<span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">Avg</span> <span class="keyword">DESC</span>;</span><br><span class="line">	</span><br><span class="line">21</span><br><span class="line">	<span class="keyword">SELECT</span></span><br><span class="line">	score.student_id,</span><br><span class="line">	<span class="keyword">MAX</span>(<span class="keyword">CASE</span> course.cid</span><br><span class="line">		<span class="keyword">WHEN</span> <span class="number">1</span> <span class="keyword">THEN</span></span><br><span class="line">			score.num</span><br><span class="line">		<span class="keyword">ELSE</span></span><br><span class="line">			<span class="number">0</span></span><br><span class="line">	<span class="keyword">END</span></span><br><span class="line">	) <span class="keyword">AS</span> 物理</span><br><span class="line">	<span class="keyword">FROM</span></span><br><span class="line">	score</span><br><span class="line">	<span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> course <span class="keyword">ON</span> course.cid=score.course_id</span><br><span class="line">	<span class="keyword">GROUP</span> <span class="keyword">BY</span> student_id</span><br><span class="line">	<span class="keyword">ORDER</span> <span class="keyword">BY</span> 物理 <span class="keyword">DESC</span></span><br><span class="line">	<span class="keyword">LIMIT</span> <span class="number">3</span>;</span><br><span class="line">	</span><br><span class="line">22</span><br><span class="line">	<span class="keyword">SELECT</span></span><br><span class="line">		course.cname <span class="keyword">AS</span> 课程名称,</span><br><span class="line">		<span class="keyword">COUNT</span>( <span class="number">2</span> ) <span class="keyword">AS</span> 人数 </span><br><span class="line">	<span class="keyword">FROM</span></span><br><span class="line">		score</span><br><span class="line">		<span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> course <span class="keyword">ON</span> score.course_id = course.cid </span><br><span class="line">	<span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">		course_id;</span><br><span class="line">		</span><br><span class="line">23</span><br><span class="line">	<span class="keyword">SELECT</span></span><br><span class="line">		score.student_id,</span><br><span class="line">		student.sname,</span><br><span class="line">		<span class="keyword">COUNT</span>(course_id)</span><br><span class="line">	<span class="keyword">FROM</span></span><br><span class="line">		score</span><br><span class="line">		<span class="keyword">LEFT</span> <span class="keyword">JOIN</span> student <span class="keyword">ON</span> score.student_id = student.sid </span><br><span class="line">	<span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">		student_id </span><br><span class="line">	<span class="keyword">HAVING</span></span><br><span class="line">		<span class="keyword">COUNT</span>( course_id ) = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">24</span><br><span class="line">	<span class="keyword">SELECT</span></span><br><span class="line">		gender,</span><br><span class="line">		<span class="keyword">COUNT</span>( <span class="keyword">sid</span> ) <span class="keyword">AS</span> 人数 </span><br><span class="line">	<span class="keyword">FROM</span></span><br><span class="line">		student </span><br><span class="line">	<span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">		gender;</span><br><span class="line">		</span><br><span class="line">25</span><br><span class="line">	<span class="keyword">SELECT</span></span><br><span class="line">		* </span><br><span class="line">	<span class="keyword">FROM</span></span><br><span class="line">		student </span><br><span class="line">	<span class="keyword">WHERE</span></span><br><span class="line">		sname <span class="keyword">LIKE</span> <span class="string">'李%'</span>;</span><br><span class="line"></span><br><span class="line">26</span><br></pre></td></tr></table></figure>

<p>数据库操作：<br>1、数据库连接写入配置文件：<br>    用户名、密码、数据库端口、编码<br>2、数据库每一表(程序中创建一个类)</p>
<h1 id="六、数据库高级应用"><a href="#六、数据库高级应用" class="headerlink" title="六、数据库高级应用"></a>六、数据库高级应用</h1><h2 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h2><p>视图的优点：保护基本表的数据。</p>
<p>视图的特点：</p>
<ul>
<li>视图的数据来源于基本表，对视图的数据进行添加、删除直接影响基本表。</li>
<li>视图的列可以来自不同的表，是表的抽象和逻辑意义上建立的。</li>
<li>视图的建立和删除不影响基本表。</li>
<li>当时图来自多个基本表时,不允许添加和删除数据,但可以修改。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">创建视图</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> 视图名 <span class="keyword">as</span> 查询表</span><br><span class="line">例如：</span><br><span class="line">	<span class="keyword">create</span> <span class="keyword">view</span> v_product <span class="keyword">as</span> <span class="keyword">select</span> t_id,t_name <span class="keyword">from</span> t_product; </span><br><span class="line">	 </span><br><span class="line">删除视图</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">view</span> 视图名<span class="number">1</span>,视图名<span class="number">2</span>,视图名<span class="number">3</span>;</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">view</span> <span class="keyword">if</span> <span class="keyword">exists</span> 视图名<span class="number">1</span>,视图名<span class="number">2</span>,视图名<span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">修改视图</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> <span class="keyword">replace</span> <span class="keyword">view</span> 视图名 a <span class="keyword">select</span> t_id,t_name <span class="keyword">from</span> t_product;    // 方式一</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">view</span> v_product <span class="keyword">as</span> <span class="keyword">select</span> t_id,t_name <span class="keyword">from</span> t_product;            // 方式二</span><br><span class="line"></span><br><span class="line">显示视图信息</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">table</span> <span class="keyword">status</span> <span class="keyword">from</span> 数据库名;                      // 查看该数据库视图的状态</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">table</span> <span class="keyword">status</span> <span class="keyword">from</span> 数据库名\G;                    // 查看该数据库视图的状态，分行显示</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">table</span> <span class="keyword">status</span> <span class="keyword">from</span> 数据库名 <span class="keyword">like</span> <span class="string">'v_stu'</span>;         // 查看该数据库指定的视图的状态</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">table</span> <span class="keyword">status</span> <span class="keyword">from</span> 数据库名\G <span class="keyword">like</span> <span class="string">'v_stu'</span>;       // 查看该数据库指定的视图的状态，分行显示</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> information_schema;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> views\G <span class="keyword">where</span> table_name=<span class="string">'v_%'</span>;                                 // 查看所有数据库下的所有视图信息</span><br></pre></td></tr></table></figure>

<h2 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h2><h3 id="索引种类"><a href="#索引种类" class="headerlink" title="索引种类"></a>索引种类</h3><p><em>索引列顺序：</em>让选择性最强的索引列放在前面。</p>
<p><strong>索引的选择性</strong>是指：不重复的索引值和记录总数的比值。最大为1</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">index</span> <span class="keyword">from</span> 表名\G           // 查询索引</span><br></pre></td></tr></table></figure>

<ul>
<li>数据量大</li>
<li>经常查询</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">普通索引 - 加速查找</span><br><span class="line">唯一索引 - 加速查找，约束列数据不能重复，null</span><br><span class="line">主键索引 - 加速查找，约束列数据不能重复，不能为null</span><br><span class="line">组合索引 - 多列可以创建一个索引文件</span><br></pre></td></tr></table></figure>

<ol>
<li>普通索引</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">index</span> @indexname <span class="keyword">on</span> @tablename(@columnname); <span class="comment">--新建索引</span></span><br><span class="line"></span><br><span class="line">// 创建索引的关键词:index/key</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb111(</span><br><span class="line">	<span class="keyword">sid</span> <span class="built_in">int</span> <span class="keyword">not</span> <span class="literal">null</span> auto_increment primary <span class="keyword">key</span>,</span><br><span class="line">	<span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">32</span>) <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">	email <span class="built_in">varchar</span>(<span class="number">64</span>) <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">	extra <span class="built_in">text</span>,</span><br><span class="line">	<span class="keyword">index</span>/<span class="keyword">key</span> ix_name (<span class="keyword">name</span>),</span><br><span class="line">	<span class="keyword">unique</span> ix_name (<span class="keyword">name</span>,email)  <span class="comment">-- 唯一索引(联合唯一索引)</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">or</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> in1(</span><br><span class="line">	<span class="keyword">sid</span> <span class="built_in">int</span> <span class="keyword">not</span> <span class="literal">null</span> auto_increment primary <span class="keyword">key</span>,</span><br><span class="line">	<span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">32</span>) <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">	email <span class="built_in">varchar</span>(<span class="number">64</span>) <span class="keyword">not</span> <span class="literal">null</span></span><br><span class="line">	);</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">index</span> ix_name <span class="keyword">on</span> tb111(<span class="keyword">name</span>);	<span class="comment">-- 新建索引</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">drop</span> ix_name <span class="keyword">on</span> tb111;		<span class="comment">-- 删除索引</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">index</span> <span class="keyword">from</span> tb111;	<span class="comment">-- 显示索引</span></span><br></pre></td></tr></table></figure>

<p><em>创建索引如果没有指定索引名，那么默认是和列名一样</em></p>
<ol start="2">
<li>唯一索引</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">unique</span> <span class="keyword">index</span> uni_index <span class="keyword">on</span> tb111(<span class="keyword">name</span>);                       // 方式一</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb111(</span><br><span class="line">	<span class="keyword">sid</span> <span class="built_in">int</span> <span class="keyword">not</span> <span class="literal">null</span> auto_increment primary <span class="keyword">key</span>,</span><br><span class="line">	<span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">32</span>) <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">	email <span class="built_in">varchar</span>(<span class="number">64</span>) <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">	extra <span class="built_in">text</span>,,</span><br><span class="line">	<span class="keyword">unique</span> ix_name (<span class="keyword">name</span>,email)  <span class="comment">-- 唯一索引(联合唯一索引)          // 方式二</span></span><br><span class="line">)<span class="keyword">engine</span>=<span class="keyword">INNODB</span> <span class="keyword">default</span> <span class="keyword">charset</span>=utf8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb111(</span><br><span class="line">	<span class="keyword">sid</span> <span class="built_in">int</span> <span class="keyword">not</span> <span class="literal">null</span> auto_increment primary <span class="keyword">key</span>,</span><br><span class="line">	<span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">32</span>) <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">	email <span class="built_in">varchar</span>(<span class="number">64</span>) <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">	extra <span class="built_in">text</span>,</span><br><span class="line">	<span class="keyword">unique</span> <span class="keyword">index</span>/<span class="keyword">key</span> (<span class="keyword">name</span>)  <span class="comment">-- 唯一索引                            // 方式三</span></span><br><span class="line">)<span class="keyword">engine</span>=<span class="keyword">INNODB</span> <span class="keyword">default</span> <span class="keyword">charset</span>=utf8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> @tablename <span class="keyword">add</span> <span class="keyword">unique</span> <span class="keyword">index</span> uni_index tb111(<span class="keyword">name</span>);      // 方式四</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb111(</span><br><span class="line">	<span class="keyword">sid</span> <span class="built_in">int</span> <span class="keyword">not</span> <span class="literal">null</span> auto_increment primary <span class="keyword">key</span>,</span><br><span class="line">	<span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">32</span>) <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">unique</span>,                               // 方式五</span><br><span class="line">	email <span class="built_in">varchar</span>(<span class="number">64</span>) <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">	extra <span class="built_in">text</span>，</span><br><span class="line">)<span class="keyword">engine</span>=<span class="keyword">INNODB</span> <span class="keyword">default</span> <span class="keyword">charset</span>=utf8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">unique</span> <span class="keyword">index</span> 索引名 <span class="keyword">on</span> 表名		// 删除索引</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>主键索引</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">   //  创建表 + 创建主键</span><br><span class="line">   <span class="keyword">create</span> <span class="keyword">table</span> in1(</span><br><span class="line">       nid <span class="built_in">int</span> <span class="keyword">not</span> <span class="literal">null</span> auto_increment primary <span class="keyword">key</span>,</span><br><span class="line">       <span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">32</span>) <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">       email <span class="built_in">varchar</span>(<span class="number">64</span>) <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">       extra <span class="built_in">text</span>,</span><br><span class="line">       <span class="keyword">index</span> ix_name (<span class="keyword">name</span>)</span><br><span class="line">   )</span><br><span class="line"></span><br><span class="line">   <span class="keyword">OR</span></span><br><span class="line"></span><br><span class="line">   <span class="keyword">create</span> <span class="keyword">table</span> in1(</span><br><span class="line">       nid <span class="built_in">int</span> <span class="keyword">not</span> <span class="literal">null</span> auto_increment,</span><br><span class="line">       <span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">32</span>) <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">       email <span class="built_in">varchar</span>(<span class="number">64</span>) <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">       extra <span class="built_in">text</span>,</span><br><span class="line">       primary <span class="keyword">key</span>(ni1),</span><br><span class="line">       <span class="keyword">index</span> ix_name (<span class="keyword">name</span>)</span><br><span class="line">   )</span><br><span class="line">   </span><br><span class="line">- 不能重复，不能为空</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> @tablename <span class="keyword">add</span> primary <span class="keyword">key</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> @tablename <span class="keyword">drop</span> primary <span class="keyword">key</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> @tablename <span class="keyword">modify</span> @columnname <span class="built_in">int</span> <span class="keyword">drop</span> primary <span class="keyword">key</span>;</span><br></pre></td></tr></table></figure>

<p>4.组合索引</p>
<p><em>注:对于同时搜索n个条件时，组合索引的性能好于多个单一索引合并</em></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">// 创建索引</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">index</span> ix_name_email <span class="keyword">on</span> in3(<span class="keyword">name</span>,email);</span><br><span class="line"></span><br><span class="line">name,pwd</span><br><span class="line">- 普通组合索引</span><br><span class="line">		无约束</span><br><span class="line">		name,pwd</span><br><span class="line">- 联合唯一索引</span><br><span class="line">		有约束，两列(多列)数据同时不相同(单个相同不影响)，才能插入，不然报错</span><br><span class="line">查找：最左匹配</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tb1 <span class="keyword">where</span> <span class="keyword">name</span> = <span class="string">'virualv'</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tb1 <span class="keyword">where</span> <span class="keyword">name</span> = <span class="string">'virualv'</span> <span class="keyword">and</span> pwd = <span class="string">'123'</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tb1 <span class="keyword">where</span> pwd = <span class="string">'123'</span>		<span class="comment"># 不会走索引</span></span><br><span class="line"></span><br><span class="line">查找：最左匹配</span><br><span class="line"><span class="keyword">name</span>,pwd,email</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tb1 <span class="keyword">where</span> <span class="keyword">name</span> = <span class="string">'virualv'</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tb1 <span class="keyword">where</span> pwd = <span class="string">'123'</span>			<span class="comment"># 不会走索引</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tb1 <span class="keyword">where</span> email = <span class="string">'virualv'</span>		<span class="comment"># 不会走索引</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tb1 <span class="keyword">where</span> <span class="keyword">name</span> = <span class="string">'virualv'</span> <span class="keyword">and</span> pwd = <span class="string">'123'</span></span><br></pre></td></tr></table></figure>

<hr>
<p>5.覆盖索引</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tb1 <span class="keyword">where</span> nid = <span class="number">1</span> </span><br><span class="line"><span class="comment"># 先去索引中找</span></span><br><span class="line"><span class="comment"># 再去数据库中找</span></span><br><span class="line"><span class="keyword">select</span> nid <span class="keyword">from</span> tb1 <span class="keyword">where</span> nid &lt; <span class="number">10</span></span><br><span class="line"><span class="comment"># 先去索引中找</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 只需要在索引表中就能获取到数据时</span></span><br><span class="line"><span class="comment">-- 这种情况就表示应用上了索引，并且不用去数据库中操作，叫做覆盖索引</span></span><br></pre></td></tr></table></figure>

<p>6.合并索引</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">		nid		name(单独索引)		email(单独索引)		pwd</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">select</span> * <span class="keyword">from</span> tb <span class="keyword">where</span> <span class="keyword">name</span> = <span class="string">'virualv'</span></span><br><span class="line">		<span class="keyword">select</span> * <span class="keyword">from</span> tb <span class="keyword">where</span> email = <span class="string">'virualv666@163.com'</span></span><br><span class="line">		</span><br><span class="line">		<span class="keyword">select</span> * <span class="keyword">from</span> tb <span class="keyword">where</span> <span class="keyword">name</span> = <span class="string">'virualv'</span> <span class="keyword">or</span> email = <span class="string">'virualv666@163.com'</span></span><br><span class="line">		</span><br><span class="line">		nid		<span class="keyword">name</span>(组)		email(合)		pwd</span><br><span class="line">		<span class="comment">#最左前缀</span></span><br><span class="line">		</span><br><span class="line">		<span class="keyword">select</span> * <span class="keyword">from</span> tb <span class="keyword">where</span> <span class="keyword">name</span> = <span class="string">'virualv'</span></span><br><span class="line">		<span class="keyword">select</span> * <span class="keyword">from</span> tb <span class="keyword">where</span> email = <span class="string">'virualv666@163.com'</span> <span class="comment">######无法满足最左前缀####### </span></span><br><span class="line">		</span><br><span class="line">		<span class="keyword">select</span> * <span class="keyword">from</span> tb <span class="keyword">where</span> <span class="keyword">name</span> = <span class="string">'virualv'</span> <span class="keyword">or</span> email = <span class="string">'virualv666@163.com'</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">--&gt; 组合和合并索引的取舍，由业务需求来决定</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 执行计划	-- 相对比较准确的表达出当前SQL运行状况</span></span><br><span class="line">		是否走索引，不走索引，则直接从数据库中去找</span><br><span class="line">		<span class="keyword">explain</span> <span class="keyword">SQL</span>语句</span><br><span class="line">			</span><br><span class="line">		<span class="number">1</span>、<span class="keyword">explain</span> <span class="keyword">SQL</span>语句</span><br><span class="line">			<span class="keyword">type</span>：<span class="keyword">ALL</span> 	- 全数据表扫描</span><br><span class="line">			<span class="keyword">type</span>：<span class="keyword">index</span>	- 全索引表扫描</span><br><span class="line">			</span><br><span class="line">		<span class="number">2</span>、<span class="keyword">limit</span></span><br><span class="line">			<span class="keyword">select</span> * <span class="keyword">from</span> tb1 <span class="keyword">where</span> email=<span class="string">'virualv666@163.com'</span>;</span><br><span class="line">			</span><br><span class="line">			<span class="keyword">select</span> * <span class="keyword">from</span> tb1 <span class="keyword">where</span> email=<span class="string">'virualv666@163.com'</span> <span class="keyword">limit</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">			<span class="comment">--------------SQL:ALL、index,都是有优化的余地--------------</span></span><br><span class="line"></span><br><span class="line">		3、range</span><br></pre></td></tr></table></figure>

<p>7.全文索引</p>
<p><em>只能在MyISAM引擎里使用,INNODB不支持</em></p>
<p><strong>设置前文索引的列必须是char,varchar,text 3种类型，其他的类型对应的列，不能加上全文索引</strong></p>
<p><em>待补充</em></p>
<p><strong>至少插入3行样本数据，用于测试的关键词 至少4个字符，不能是停止词：非常频繁出现的常用词，例如:the,some,my,you等 这样过于平常而被认为是不具语义的词，存在一个</strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t3(</span><br><span class="line">	nid <span class="built_in">int</span> <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">	<span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">20</span>),</span><br><span class="line">	sex <span class="built_in">char</span>(<span class="number">1</span>),</span><br><span class="line">	fulltext <span class="keyword">index</span> FullTex_inx(<span class="keyword">name</span>)</span><br><span class="line">)<span class="keyword">engine</span>=MyISAM <span class="keyword">default</span> <span class="keyword">charset</span>=utf8;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t3(</span><br><span class="line">	nid <span class="built_in">int</span> <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">	<span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">20</span>),</span><br><span class="line">	sex <span class="built_in">char</span>(<span class="number">1</span>)</span><br><span class="line">)<span class="keyword">engine</span>=MyISAM <span class="keyword">default</span> <span class="keyword">charset</span>=utf8;</span><br><span class="line"><span class="keyword">create</span> fulltext <span class="keyword">index</span> FullTex_inx t3(<span class="keyword">name</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> t3 <span class="keyword">where</span> <span class="keyword">match</span>(<span class="keyword">name</span>) against (索引词); </span><br><span class="line"></span><br><span class="line">**待处理</span><br><span class="line"><span class="comment">------计算匹配度   </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span>  t_person4.*, <span class="keyword">match</span>(t_info) against (<span class="string">'今天吃了'</span>)  <span class="keyword">from</span> t_person4 \G; </span><br><span class="line"></span><br><span class="line"> <span class="comment">----测试的关键词出现在所在行中，匹配度就不是0，否则就是0 </span></span><br><span class="line"><span class="keyword">select</span>  t_person4.*, <span class="keyword">match</span>(t_info) against (<span class="string">'katherine'</span>)  <span class="keyword">from</span> t_person4 \G; </span><br><span class="line">**</span><br></pre></td></tr></table></figure>

<p>8.空间索引</p>
<p><em>只有如下字段类型可以建空间索引</em></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">// 建立空间索引</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t4(</span><br><span class="line">	nid geometry <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">	<span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">	age <span class="built_in">int</span> <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">	info <span class="built_in">varchar</span>(<span class="number">255</span>),</span><br><span class="line">	spatial <span class="keyword">index</span> spat_idx(nid)</span><br><span class="line">)<span class="keyword">engine</span>=MyISAM <span class="keyword">default</span> <span class="keyword">charset</span>=utf8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">index</span> <span class="keyword">from</span> t4\G;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> <span class="keyword">if</span> <span class="keyword">exists</span> t4;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t4(</span><br><span class="line">	nid geometry <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">	<span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">	age <span class="built_in">int</span> <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">	info <span class="built_in">varchar</span>(<span class="number">255</span></span><br><span class="line">)<span class="keyword">engine</span>=MyISAM <span class="keyword">default</span> <span class="keyword">charset</span>=utf8;</span><br><span class="line">// 建立空间索引</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> t4 <span class="keyword">add</span> spatial <span class="keyword">index</span> spat_idx(nid);</span><br></pre></td></tr></table></figure>

<p>9.正确使用索引（命中索引）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">- like '%xx'</span><br><span class="line">	<span class="keyword">select</span> * <span class="keyword">from</span> tb1 <span class="keyword">where</span> <span class="keyword">name</span> <span class="keyword">like</span> <span class="string">'%cn'</span>;</span><br><span class="line">- 使用函数</span><br><span class="line">	<span class="keyword">select</span> * <span class="keyword">from</span> tb1 <span class="keyword">where</span> <span class="keyword">reverse</span>(<span class="keyword">name</span>) = <span class="string">'wupeiqi'</span>;</span><br><span class="line">- or</span><br><span class="line">	<span class="keyword">select</span> * <span class="keyword">from</span> tb1 <span class="keyword">where</span> nid = <span class="number">1</span> <span class="keyword">or</span> email = <span class="string">'seven@live.com'</span>;</span><br><span class="line">	特别的：当or条件中有未建立索引的列才失效，以下会走索引</span><br><span class="line">			<span class="keyword">select</span> * <span class="keyword">from</span> tb1 <span class="keyword">where</span> nid = <span class="number">1</span> <span class="keyword">or</span> <span class="keyword">name</span> = <span class="string">'seven'</span>;</span><br><span class="line">			<span class="keyword">select</span> * <span class="keyword">from</span> tb1 <span class="keyword">where</span> nid = <span class="number">1</span> <span class="keyword">or</span> email = <span class="string">'seven@live.com'</span> <span class="keyword">and</span> <span class="keyword">name</span> = <span class="string">'alex'</span></span><br><span class="line">- 类型不一致</span><br><span class="line">	如果列是字符串类型，传入条件是必须用引号引起来，不然...</span><br><span class="line">	<span class="keyword">select</span> * <span class="keyword">from</span> tb1 <span class="keyword">where</span> <span class="keyword">name</span> = <span class="number">999</span>;</span><br><span class="line">- !=</span><br><span class="line">	<span class="keyword">select</span> * <span class="keyword">from</span> tb1 <span class="keyword">where</span> <span class="keyword">name</span> != <span class="string">'alex'</span></span><br><span class="line">	特别的：如果是主键，则还是会走索引</span><br><span class="line">		<span class="keyword">select</span> * <span class="keyword">from</span> tb1 <span class="keyword">where</span> nid != <span class="number">123</span></span><br><span class="line">- &gt;</span><br><span class="line">	<span class="keyword">select</span> * <span class="keyword">from</span> tb1 <span class="keyword">where</span> <span class="keyword">name</span> &gt; <span class="string">'alex'</span></span><br><span class="line">	特别的：如果是主键或索引是整数类型，则还是会走索引</span><br><span class="line">		<span class="keyword">select</span> * <span class="keyword">from</span> tb1 <span class="keyword">where</span> nid &gt; <span class="number">123</span></span><br><span class="line">		<span class="keyword">select</span> * <span class="keyword">from</span> tb1 <span class="keyword">where</span> <span class="keyword">num</span> &gt; <span class="number">123</span></span><br><span class="line">- <span class="keyword">order</span> <span class="keyword">by</span></span><br><span class="line">	<span class="keyword">select</span> email <span class="keyword">from</span> tb1 <span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">name</span> <span class="keyword">desc</span>;</span><br><span class="line">	当根据索引排序时候，选择的映射如果不是索引，则不走索引</span><br><span class="line">	特别的：如果对主键排序，则还是走索引：</span><br><span class="line">		<span class="keyword">select</span> * <span class="keyword">from</span> tb1 <span class="keyword">order</span> <span class="keyword">by</span> nid <span class="keyword">desc</span>;</span><br><span class="line"> </span><br><span class="line">- 组合索引最左前缀</span><br><span class="line">	如果组合索引为：(name,email)</span><br><span class="line">	name and email       <span class="comment">-- 使用索引</span></span><br><span class="line">	name                 <span class="comment">-- 使用索引</span></span><br><span class="line">	email                <span class="comment">-- 不使用索引</span></span><br><span class="line">	</span><br><span class="line">其他注意事项：</span><br><span class="line">	- 避免使用<span class="keyword">select</span> *</span><br><span class="line">	- <span class="keyword">count</span>(<span class="number">1</span>)或<span class="keyword">count</span>(列) 代替 <span class="keyword">count</span>(*)</span><br><span class="line">	- 创建表时尽量时 <span class="built_in">char</span> 代替 <span class="built_in">varchar</span></span><br><span class="line">	- 表的字段顺序固定长度的字段优先</span><br><span class="line">	- 组合索引代替多个单列索引（经常使用多个条件查询时）</span><br><span class="line">	- 尽量使用短索引</span><br><span class="line">	- 使用连接（<span class="keyword">JOIN</span>）来代替子查询(Sub-Queries)</span><br><span class="line">	- 连表时注意条件类型需一致</span><br><span class="line">	- 索引散列值（重复少）不适合建索引，例：性别不适合</span><br></pre></td></tr></table></figure>

<p>删除索引</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">// 方式一</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">index</span> 索引名 <span class="keyword">on</span> 表名;</span><br><span class="line"></span><br><span class="line">//方式二</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">drop</span> <span class="keyword">index</span> 索引名;</span><br><span class="line"></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">drop</span> primary <span class="keyword">key</span>;     // 删除主键索引</span><br></pre></td></tr></table></figure>

<p><strong>禁用和启用索引</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">enable</span> <span class="keyword">keys</span>;        // 启用索引</span><br><span class="line"></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">disable</span> <span class="keyword">keys</span>;       // 禁用索引</span><br></pre></td></tr></table></figure>

<h2 id="索引的优点"><a href="#索引的优点" class="headerlink" title="索引的优点"></a>索引的优点</h2><ul>
<li>索引通常远小于数据行的大小，只读取索引能大大减少数据访问量。</li>
<li>一些存储引擎（例如 MyISAM）在内存中只缓存索引，而数据依赖于操作系统来缓存。因此，只访问索引可以</li>
<li>不使用系统调用（通常比较费时）。</li>
<li>对于 InnoDB 引擎，若辅助索引能够覆盖查询，则无需访问主索引。</li>
</ul>
<h1 id="普通索引，数字，num-！-123-？？？？"><a href="#普通索引，数字，num-！-123-？？？？" class="headerlink" title="普通索引，数字，num ！=123 ？？？？"></a>普通索引，数字，num ！=123 ？？？？</h1><h1 id="name-email-pwd-email-pwd-是否走索引？"><a href="#name-email-pwd-email-pwd-是否走索引？" class="headerlink" title="(name,email,pwd) ? email,pwd 是否走索引？"></a>(name,email,pwd) ? email,pwd 是否走索引？</h1><h1 id="如何创建短索引？"><a href="#如何创建短索引？" class="headerlink" title="如何创建短索引？"></a>如何创建短索引？</h1><p><em>待补充</em> </p>
<p><strong>注意：</strong></p>
<ol>
<li>索引是在存储引擎中实现的，也就是说不同的存储引擎会使用不同的索引</li>
<li>MyISAM和InnoDB存储引擎：只支持BTREE索引，也就是说默认使用BTREE，不能更换</li>
<li>MEMORY/HEAP存储引擎支持HASH和BTREE索引</li>
<li>索引我们分为四类来讲，单列索引（普通索引，唯一索引，主键索引）、组合索引、全文索引、空间索引。</li>
</ol>
<h4 id="mysql-慢日志"><a href="#mysql-慢日志" class="headerlink" title="mysql 慢日志"></a>mysql 慢日志</h4><h2 id="分页查询"><a href="#分页查询" class="headerlink" title="分页查询"></a>分页查询</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tb <span class="keyword">limit</span> (<span class="keyword">start</span><span class="number">-1</span>)*pageSize,pageSize</span><br></pre></td></tr></table></figure>

<p>limit原理</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">每页显示10条：</span><br><span class="line">当前 118 120， 125</span><br><span class="line"></span><br><span class="line">倒序：</span><br><span class="line">            大      小</span><br><span class="line">            980    970  7 6  6 5  54  43  32</span><br><span class="line"></span><br><span class="line">21 19 98     </span><br><span class="line">下一页：</span><br><span class="line"></span><br><span class="line">    <span class="keyword">select</span> </span><br><span class="line">        * </span><br><span class="line">    <span class="keyword">from</span> </span><br><span class="line">        tb1 </span><br><span class="line">    <span class="keyword">where</span> </span><br><span class="line">        nid &lt; (<span class="keyword">select</span> nid <span class="keyword">from</span> (<span class="keyword">select</span> nid <span class="keyword">from</span> tb1 <span class="keyword">where</span> nid &lt; 当前页最小值 <span class="keyword">order</span> <span class="keyword">by</span> nid <span class="keyword">desc</span> <span class="keyword">limit</span> 每页数据 *【页码-当前页】) A <span class="keyword">order</span> <span class="keyword">by</span> A.nid <span class="keyword">asc</span> <span class="keyword">limit</span> <span class="number">1</span>)  </span><br><span class="line">    <span class="keyword">order</span> <span class="keyword">by</span> </span><br><span class="line">        nid <span class="keyword">desc</span> </span><br><span class="line">    <span class="keyword">limit</span> <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">select</span> </span><br><span class="line">        * </span><br><span class="line">    <span class="keyword">from</span> </span><br><span class="line">        tb1 </span><br><span class="line">    <span class="keyword">where</span> </span><br><span class="line">        nid &lt; (<span class="keyword">select</span> nid <span class="keyword">from</span> (<span class="keyword">select</span> nid <span class="keyword">from</span> tb1 <span class="keyword">where</span> nid &lt; <span class="number">970</span>  <span class="keyword">order</span> <span class="keyword">by</span> nid <span class="keyword">desc</span> <span class="keyword">limit</span> <span class="number">40</span>) A <span class="keyword">order</span> <span class="keyword">by</span> A.nid <span class="keyword">asc</span> <span class="keyword">limit</span> <span class="number">1</span>)  </span><br><span class="line">    <span class="keyword">order</span> <span class="keyword">by</span> </span><br><span class="line">        nid <span class="keyword">desc</span> </span><br><span class="line">    <span class="keyword">limit</span> <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">上一页：</span><br><span class="line"></span><br><span class="line">    <span class="keyword">select</span> </span><br><span class="line">        * </span><br><span class="line">    <span class="keyword">from</span> </span><br><span class="line">        tb1 </span><br><span class="line">    <span class="keyword">where</span> </span><br><span class="line">        nid &lt; (<span class="keyword">select</span> nid <span class="keyword">from</span> (<span class="keyword">select</span> nid <span class="keyword">from</span> tb1 <span class="keyword">where</span> nid &gt; 当前页最大值 <span class="keyword">order</span> <span class="keyword">by</span> nid <span class="keyword">asc</span> <span class="keyword">limit</span> 每页数据 *【当前页-页码】) A <span class="keyword">order</span> <span class="keyword">by</span> A.nid <span class="keyword">asc</span> <span class="keyword">limit</span> <span class="number">1</span>)  </span><br><span class="line">    <span class="keyword">order</span> <span class="keyword">by</span> </span><br><span class="line">        nid <span class="keyword">desc</span> </span><br><span class="line">    <span class="keyword">limit</span> <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">select</span> </span><br><span class="line">        * </span><br><span class="line">    <span class="keyword">from</span> </span><br><span class="line">        tb1 </span><br><span class="line">    <span class="keyword">where</span> </span><br><span class="line">        nid &lt; (<span class="keyword">select</span> nid <span class="keyword">from</span> (<span class="keyword">select</span> nid <span class="keyword">from</span> tb1 <span class="keyword">where</span> nid &gt; <span class="number">980</span> <span class="keyword">order</span> <span class="keyword">by</span> nid <span class="keyword">asc</span> <span class="keyword">limit</span> <span class="number">20</span>) A <span class="keyword">order</span> <span class="keyword">by</span> A.nid <span class="keyword">desc</span> <span class="keyword">limit</span> <span class="number">1</span>)  </span><br><span class="line">    <span class="keyword">order</span> <span class="keyword">by</span> </span><br><span class="line">        nid <span class="keyword">desc</span> </span><br><span class="line">    <span class="keyword">limit</span> <span class="number">10</span>;</span><br></pre></td></tr></table></figure>

<h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><h4 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h4><ol>
<li>局部变量</li>
</ol>
<p><code>作用范围在存储过程的语句块内，函数内有效，超出范围不可见</code></p>
<ol start="2">
<li><p>用户变量</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">@变量名     变量名自取</span><br><span class="line">	<span class="keyword">set</span> @变量名 = 值<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">set</span> @变量名 = 值<span class="number">1</span>；</span><br><span class="line">	<span class="keyword">select</span> 值<span class="number">1</span> <span class="keyword">into</span> @变量名;</span><br><span class="line">	<span class="keyword">select</span> @变量名 := 值<span class="number">1</span>;</span><br><span class="line">	</span><br><span class="line">作用范围：单次连接期间有效；退出登录，重新登录后获取的值是null</span><br></pre></td></tr></table></figure>
</li>
<li><p>会话变量</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">@@变量名 三百多个(mysql 5.5中) 513个(mysql 5.7中) ,变量名固定</span><br><span class="line"><span class="code">	session 变量名固定</span></span><br><span class="line"><span class="code">	@@session.变量名</span></span><br><span class="line"></span><br><span class="line">作用范围：单次连接期间有效，退出登录，重新登录，恢复成默认值</span><br></pre></td></tr></table></figure>
</li>
<li><p>全局变量</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">三百多个(mysql 5.5中) 499个(mysql 5.7中)</span><br><span class="line">@@global.变量名</span><br><span class="line">global 变量名固定</span><br><span class="line"></span><br><span class="line">作用范围：在服务启动期间有效，如果服务重启，失败，恢复成默认值（退出登录，重新登录，你设置的值仍旧有效，除非  重启服务），服务重启，恢复成默认值。</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="存储过程"><a href="#存储过程" class="headerlink" title="存储过程"></a>存储过程</h2><h4 id="存储过程编写"><a href="#存储过程编写" class="headerlink" title="存储过程编写"></a>存储过程编写</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">// 创建存储过程</span><br><span class="line">delimiter &amp;&amp;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> pro_add(<span class="keyword">in</span> a <span class="built_in">int</span>,<span class="keyword">in</span> b <span class="built_in">int</span>,<span class="keyword">out</span> <span class="keyword">result</span> <span class="built_in">int</span>)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">declare</span> c <span class="built_in">int</span>;</span><br><span class="line"><span class="keyword">set</span> c = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">set</span> c = a+b;</span><br><span class="line"><span class="keyword">set</span> <span class="keyword">result</span> = c;</span><br><span class="line"><span class="keyword">end</span> &amp;&amp;;</span><br><span class="line">delimiter  ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span> @ <span class="keyword">result</span>=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">call</span> pro_add(<span class="number">10</span>,<span class="number">13</span>,@<span class="keyword">result</span>); </span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> @<span class="keyword">result</span>;</span><br><span class="line"></span><br><span class="line">// 删除存储过程</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">procedure</span> <span class="keyword">if</span> <span class="keyword">exists</span> pro_add</span><br></pre></td></tr></table></figure>

<h2 id="函数-1"><a href="#函数-1" class="headerlink" title="函数"></a>函数</h2><ol>
<li><p>条件分支语句</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">// 多重if,case分支  既能用于等值判断，又能用于区间判断</span><br><span class="line">if 条件 then</span><br><span class="line">	语句块;</span><br><span class="line">elseif 条件2 then</span><br><span class="line">	语句块;</span><br><span class="line">elseif 条件3 then</span><br><span class="line">	语句块;</span><br><span class="line">else</span><br><span class="line">	语句块;</span><br><span class="line"><span class="keyword">end</span> <span class="keyword">if</span>;     // 结束语句 （注意不要忘了<span class="keyword">end</span> <span class="keyword">if</span>后的分号<span class="string">';'</span>）</span><br><span class="line"></span><br><span class="line">// <span class="keyword">case</span>语法 只能用于等值判断</span><br><span class="line"><span class="keyword">case</span> 变量名</span><br><span class="line"><span class="keyword">when</span> 值<span class="number">1</span> <span class="keyword">then</span> 语句块<span class="number">1</span>;</span><br><span class="line">when 值2 then 语句块2;</span><br><span class="line">......</span><br><span class="line">else 语句块n;</span><br><span class="line"><span class="keyword">end</span> <span class="keyword">case</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>循环语句</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">while语句</span><br><span class="line"></span><br><span class="line">leave while/repeat/loop 语句</span><br><span class="line"></span><br><span class="line">iterate // 类似于java中的continue</span><br><span class="line"></span><br><span class="line">repeat 语句</span><br><span class="line"></span><br><span class="line">循环标签 </span><br><span class="line"></span><br><span class="line">loop 语句</span><br><span class="line"></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">function</span> <span class="keyword">status</span>\G;</span><br><span class="line"></span><br><span class="line">或在 information_schema库中的routine_name表 中查</span><br><span class="line">或在 mysql库中的function表 中查</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h4 id="自定义函数"><a href="#自定义函数" class="headerlink" title="自定义函数"></a>自定义函数</h4><h2 id="游标"><a href="#游标" class="headerlink" title="游标"></a>游标</h2><h2 id="触发器"><a href="#触发器" class="headerlink" title="触发器"></a>触发器</h2><h4 id="每个表有如下四种触发器："><a href="#每个表有如下四种触发器：" class="headerlink" title="每个表有如下四种触发器："></a>每个表有如下四种触发器：</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">before <span class="keyword">insert</span></span><br><span class="line"><span class="keyword">after</span> <span class="keyword">insert</span></span><br><span class="line"><span class="keyword">before</span> <span class="keyword">update</span></span><br><span class="line"><span class="keyword">after</span> <span class="keyword">update</span></span><br><span class="line"><span class="keyword">before</span> <span class="keyword">delete</span></span><br><span class="line"><span class="keyword">after</span> <span class="keyword">delete</span></span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">// before <span class="keyword">insert</span></span><br><span class="line">delimiter $$</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">trigger</span> <span class="keyword">if</span> <span class="keyword">exists</span> tri_stuInsert;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> tri_stuInsert <span class="keyword">before</span> <span class="keyword">insert</span> <span class="keyword">on</span> stu</span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="keyword">row</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_log(t_createDate,eventName) <span class="keyword">values</span>(<span class="keyword">now</span>(),<span class="string">'INSERT'</span>);</span><br><span class="line"><span class="keyword">end</span> $$</span><br><span class="line"></span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line">// after <span class="keyword">insert</span></span><br><span class="line">delimiter $$</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">trigger</span> <span class="keyword">if</span> <span class="keyword">exists</span> tri_stuInsert;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> tri_stuInsert <span class="keyword">after</span> <span class="keyword">insert</span> <span class="keyword">on</span> stu</span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="keyword">row</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">	<span class="keyword">insert</span> <span class="keyword">into</span> t_log(t_createDate,eventName) <span class="keyword">values</span>(<span class="keyword">now</span>(),<span class="string">'Insert'</span>);</span><br><span class="line"><span class="keyword">end</span> $$</span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">trigger</span> <span class="keyword">if</span> <span class="keyword">exists</span> tri_stuInsert;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// before <span class="keyword">update</span></span><br><span class="line">delimiter $$</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">trigger</span> <span class="keyword">if</span> <span class="keyword">exists</span> tri_update;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> tri_update <span class="keyword">before</span> <span class="keyword">update</span> <span class="keyword">on</span> stu</span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="keyword">rows</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">	<span class="keyword">insert</span> <span class="keyword">into</span> t_log(t_createDate,eventName) <span class="keyword">values</span>(<span class="keyword">now</span>(),<span class="string">'Update'</span>);</span><br><span class="line"><span class="keyword">end</span> $$</span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line">// after <span class="keyword">update</span></span><br><span class="line">delimiter $$</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">trigger</span> <span class="keyword">if</span> <span class="keyword">exists</span> tri_update;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> tri_update <span class="keyword">after</span> <span class="keyword">update</span> <span class="keyword">on</span> stu</span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="keyword">rows</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">	<span class="keyword">insert</span> <span class="keyword">into</span> t_log(t_createDate,eventName) <span class="keyword">values</span>(<span class="keyword">now</span>(),<span class="string">'Update'</span>);</span><br><span class="line"><span class="keyword">end</span> $$</span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line">// before <span class="keyword">delete</span></span><br><span class="line">delimiter $$</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">trigger</span> <span class="keyword">if</span> <span class="keyword">exists</span> tri_delete;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> tri_delete <span class="keyword">before</span> <span class="keyword">delete</span> <span class="keyword">on</span> stu</span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="keyword">row</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">	<span class="keyword">insert</span> <span class="keyword">into</span> t_log(t_createDate,eventName) <span class="keyword">values</span>(<span class="keyword">now</span>(),<span class="string">'Delete'</span>);</span><br><span class="line"><span class="keyword">end</span> $$</span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line">// after <span class="keyword">delete</span></span><br><span class="line">delimiter $$</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">trigger</span> <span class="keyword">if</span> <span class="keyword">exists</span> tri_delete;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> tri_delete <span class="keyword">after</span> <span class="keyword">delete</span> <span class="keyword">on</span> stu</span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="keyword">row</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">	<span class="keyword">insert</span> <span class="keyword">into</span> t_log(t_createDate,eventName) <span class="keyword">values</span>(<span class="keyword">now</span>(),<span class="string">'Delete'</span>);</span><br><span class="line"><span class="keyword">end</span> $$</span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line">// 查询 触发器</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">triggers</span> <span class="keyword">from</span> 表名\G;</span><br></pre></td></tr></table></figure>

<hr>
<p>部分参考于</p>
<ul>
<li><a href="http://www.cnblogs.com/wupeiqi/articles/5713315.html" target="_blank" rel="noopener">Page 1</a></li>
<li><a href="http://www.cnblogs.com/wupeiqi/articles/5713323.html" target="_blank" rel="noopener">Page 2</a></li>
</ul>

    </div>

    
    
    
        
      

      <footer class="post-footer">
          
            
          
          <div class="post-tags">
            
              <a href="/tags/sql/" rel="tag"># sql</a>
            
              <a href="/tags/db/" rel="tag"># db</a>
            
              <a href="/tags/database/" rel="tag"># database</a>
            
              <a href="/tags/mysql/" rel="tag"># mysql</a>
            
              <a href="/tags/mariadb/" rel="tag"># mariadb</a>
            
          </div>
        

        

          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
              
                <a href="/2019/09/15/Java-知识库/" rel="next" title="Java 知识库">
                  <i class="fa fa-chevron-left"></i> Java 知识库
                </a>
              
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
              
                <a href="/2019/09/15/RSS收集库/" rel="prev" title="RSS收集库">
                  RSS收集库 <i class="fa fa-chevron-right"></i>
                </a>
              
            </div>
          </div>
        
      </footer>
    
  </div>
  
  
  
  </article>

  </div>


          </div>
          

        </div>
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">
        
        
        
        
      

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#MySQL"><span class="nav-number">1.</span> <span class="nav-text">MySQL</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#一、数据库管理系统DBMS"><span class="nav-number">2.</span> <span class="nav-text">一、数据库管理系统DBMS</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#软件"><span class="nav-number">2.0.1.</span> <span class="nav-text">软件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#写程序："><span class="nav-number">2.0.2.</span> <span class="nav-text">写程序：</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#a-程序"><span class="nav-number">2.0.2.1.</span> <span class="nav-text">a. 程序</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#b-数据"><span class="nav-number">2.0.2.2.</span> <span class="nav-text">b. 数据</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#c-制作一套规则"><span class="nav-number">2.0.2.3.</span> <span class="nav-text">c. 制作一套规则</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#d-socket客户端和服务端用户认证-授权，限制"><span class="nav-number">2.0.2.4.</span> <span class="nav-text">d. socket客户端和服务端用户认证,授权，限制</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#服务端和客户端"><span class="nav-number">2.0.2.4.1.</span> <span class="nav-text">服务端和客户端</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#二、下载安装："><span class="nav-number">3.</span> <span class="nav-text">二、下载安装：</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#省事："><span class="nav-number">3.1.</span> <span class="nav-text">省事：</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#三、MySQL数据库"><span class="nav-number">4.</span> <span class="nav-text">三、MySQL数据库</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#四-SQL语句"><span class="nav-number">5.</span> <span class="nav-text">四.SQL语句</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#数据库级别"><span class="nav-number">5.1.</span> <span class="nav-text">数据库级别</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#表级别"><span class="nav-number">5.2.</span> <span class="nav-text">表级别</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#约束"><span class="nav-number">5.2.1.</span> <span class="nav-text">约束</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数值："><span class="nav-number">5.2.2.</span> <span class="nav-text">数值：</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#bit-M"><span class="nav-number">5.2.2.1.</span> <span class="nav-text">bit[(M)]</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#tinyint-m-unsigned-zerofill"><span class="nav-number">5.2.2.2.</span> <span class="nav-text">tinyint[(m)] [unsigned] [zerofill]</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#int-m-unsigned-zerofill"><span class="nav-number">5.2.2.3.</span> <span class="nav-text">int[(m)][unsigned][zerofill]</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#bigint-m-unsigned-zerofill"><span class="nav-number">5.2.2.4.</span> <span class="nav-text">bigint[(m)][unsigned][zerofill]</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#decimal-m-d-unsigned-zerofill"><span class="nav-number">5.2.2.5.</span> <span class="nav-text">decimal[(m[,d])] [unsigned] [zerofill]</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#FLOAT-M-D-UNSIGNED-ZEROFILL"><span class="nav-number">5.2.2.6.</span> <span class="nav-text">FLOAT[(M,D)] [UNSIGNED] [ZEROFILL]</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#DOUBLE-M-D-UNSIGNED-ZEROFILL"><span class="nav-number">5.2.2.7.</span> <span class="nav-text">DOUBLE[(M,D)] [UNSIGNED] [ZEROFILL]</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#字符串"><span class="nav-number">5.2.3.</span> <span class="nav-text">字符串</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#定长"><span class="nav-number">5.2.3.1.</span> <span class="nav-text">定长</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#char-m"><span class="nav-number">5.2.3.2.</span> <span class="nav-text">char (m)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#变长"><span class="nav-number">5.2.3.3.</span> <span class="nav-text">变长</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#varchar-m"><span class="nav-number">5.2.3.4.</span> <span class="nav-text">varchar(m)</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#enum"><span class="nav-number">5.2.4.</span> <span class="nav-text">enum</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#set"><span class="nav-number">5.2.5.</span> <span class="nav-text">set</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#二进制数据："><span class="nav-number">5.2.6.</span> <span class="nav-text">二进制数据：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#文本"><span class="nav-number">5.2.7.</span> <span class="nav-text">文本</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#text"><span class="nav-number">5.2.7.1.</span> <span class="nav-text">text</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#mediumtext"><span class="nav-number">5.2.7.2.</span> <span class="nav-text">mediumtext</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#longtext"><span class="nav-number">5.2.7.3.</span> <span class="nav-text">longtext</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DATE"><span class="nav-number">5.2.8.</span> <span class="nav-text">DATE</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#日期时间"><span class="nav-number">5.2.9.</span> <span class="nav-text">日期时间</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#TIME"><span class="nav-number">5.2.9.1.</span> <span class="nav-text">TIME</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#YEAR"><span class="nav-number">5.2.9.2.</span> <span class="nav-text">YEAR</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#DATETIME"><span class="nav-number">5.2.9.3.</span> <span class="nav-text">DATETIME</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#TIMESTAMP"><span class="nav-number">5.2.9.4.</span> <span class="nav-text">TIMESTAMP</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#函数"><span class="nav-number">5.3.</span> <span class="nav-text">函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数据行级别"><span class="nav-number">5.4.</span> <span class="nav-text">数据行级别</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-增"><span class="nav-number">5.4.0.0.1.</span> <span class="nav-text">1.增</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-删"><span class="nav-number">5.4.0.0.2.</span> <span class="nav-text">2.删</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-改"><span class="nav-number">5.4.0.0.3.</span> <span class="nav-text">3.改</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-查"><span class="nav-number">5.4.0.0.4.</span> <span class="nav-text">4.查</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#其他"><span class="nav-number">5.4.0.0.5.</span> <span class="nav-text">其他</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#会话"><span class="nav-number">5.4.0.0.6.</span> <span class="nav-text">会话</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#事务"><span class="nav-number">5.5.</span> <span class="nav-text">事务</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ACID特性"><span class="nav-number">5.5.0.1.</span> <span class="nav-text">ACID特性</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#五、数据库管理"><span class="nav-number">6.</span> <span class="nav-text">五、数据库管理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#运用Navicat管理数据库"><span class="nav-number">6.0.1.</span> <span class="nav-text">运用Navicat管理数据库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数据库备份与恢复"><span class="nav-number">6.0.2.</span> <span class="nav-text">数据库备份与恢复</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#六、数据库高级应用"><span class="nav-number">7.</span> <span class="nav-text">六、数据库高级应用</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#视图"><span class="nav-number">7.1.</span> <span class="nav-text">视图</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#索引"><span class="nav-number">7.2.</span> <span class="nav-text">索引</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#索引种类"><span class="nav-number">7.2.1.</span> <span class="nav-text">索引种类</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#索引的优点"><span class="nav-number">7.3.</span> <span class="nav-text">索引的优点</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#普通索引，数字，num-！-123-？？？？"><span class="nav-number">8.</span> <span class="nav-text">普通索引，数字，num ！=123 ？？？？</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#name-email-pwd-email-pwd-是否走索引？"><span class="nav-number">9.</span> <span class="nav-text">(name,email,pwd) ? email,pwd 是否走索引？</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#如何创建短索引？"><span class="nav-number">10.</span> <span class="nav-text">如何创建短索引？</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#mysql-慢日志"><span class="nav-number">10.0.0.1.</span> <span class="nav-text">mysql 慢日志</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#分页查询"><span class="nav-number">10.1.</span> <span class="nav-text">分页查询</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#变量"><span class="nav-number">10.2.</span> <span class="nav-text">变量</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#分类"><span class="nav-number">10.2.0.1.</span> <span class="nav-text">分类</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#存储过程"><span class="nav-number">10.3.</span> <span class="nav-text">存储过程</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#存储过程编写"><span class="nav-number">10.3.0.1.</span> <span class="nav-text">存储过程编写</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#函数-1"><span class="nav-number">10.4.</span> <span class="nav-text">函数</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#自定义函数"><span class="nav-number">10.4.0.1.</span> <span class="nav-text">自定义函数</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#游标"><span class="nav-number">10.5.</span> <span class="nav-text">游标</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#触发器"><span class="nav-number">10.6.</span> <span class="nav-text">触发器</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#每个表有如下四种触发器："><span class="nav-number">10.6.0.1.</span> <span class="nav-text">每个表有如下四种触发器：</span></a></li></ol></li></ol></li></ol></li></ol></div>
        
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">virualv</p>
  <div class="site-description" itemprop="description">A new kitbar blog site!</div>
</div>
  <nav class="site-state motion-element">
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">13</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-categories">
        
          
            <a href="/categories/">
          
        
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">categories</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-tags">
        
          
            <a href="/tags/">
          
        
        <span class="site-state-item-count">26</span>
        <span class="site-state-item-name">tags</span>
        </a>
      </div>
    
  </nav>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://github.com/virualv" title="GitHub &rarr; https://github.com/virualv" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="mailto:virualv@gmail.com" title="E-Mail &rarr; mailto:virualv@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://twitter.com/virualv" title="Twitter &rarr; https://twitter.com/virualv" rel="noopener" target="_blank"><i class="fa fa-fw fa-twitter"></i>Twitter</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://www.facebook.com/virualv" title="FB Page &rarr; https://www.facebook.com/virualv" rel="noopener" target="_blank"><i class="fa fa-fw fa-facebook"></i>FB Page</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://instagram.com/virualv" title="Instagram &rarr; https://instagram.com/virualv" rel="noopener" target="_blank"><i class="fa fa-fw fa-instagram"></i>Instagram</a>
      </span>
    
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">virualv</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.9.0</div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.4.0</div>

        












        
      </div>
    </footer>
  </div>

  


  <script src="/lib/anime.min.js?v=3.1.0"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
<script src="/js/utils.js?v=7.4.0"></script><script src="/js/motion.js?v=7.4.0"></script>
<script src="/js/schemes/muse.js?v=7.4.0"></script>
<script src="/js/next-boot.js?v=7.4.0"></script>



  





















  

  

  

</body>
</html>
